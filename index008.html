<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>KETADATA // CASCADE GRID</title>

<style>
:root{
  --bg:#000;
  --ink:#fff;

  /* CASCADE GRID */
  --tile: 26;
  --tileVar: 10;
  --colsHint: 52;

  /* MOTION */
  --speedMin: 240;
  --speedMax: 820;
  --spawnRate: 0.22;
  --trail: 0.16;

  /* CHAOS */
  --stutter: 0.18;
  --stutterAmp: 2.25;
  --clusterChance: 0.32;
  --clusterMax: 4;

  /* UI — CIGARETTE WARNING */
  --uiFont: Arial, Helvetica, sans-serif;
  --uiSize: 15px;
  --uiKern: 0.14em;
  --uiPadY: 18px;
  --uiPadX: 18px;
  --uiBorder: 5px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:#000;
  overflow:hidden;
}

/* FIELD */
#wrap{position:fixed; inset:0; z-index:1}
canvas{width:100%; height:100%; image-rendering:pixelated}

/* UI */
#ui{
  position:fixed;
  inset:0;
  z-index:2;
  pointer-events:none;
  user-select:none;
  font-family:var(--uiFont);
}

/* WARNING — CIGARETTE LABEL */
#warn{
  position:absolute;
  top:16px;
  left:16px;
  max-width:520px;

  pointer-events:auto;

  font-weight:900;
  font-size:var(--uiSize);
  letter-spacing:var(--uiKern);
  line-height:1.35;
  text-transform:uppercase;

  color:#000;
  background:#fff;

  border:var(--uiBorder) solid #fff;
  padding:var(--uiPadY) var(--uiPadX);

  box-shadow:
    0 0 0 6px #000 inset,
    0 0 0 6px #fff;

}

/* ENTER — MATCHING BRUTALISM */
#enter{
  position:absolute;
  right:16px;
  bottom:16px;

  pointer-events:auto;

  font-weight:900;
  font-size:16px;
  letter-spacing:0.22em;
  text-transform:uppercase;

  color:#000;
  background:#fff;

  border:5px solid #fff;
  padding:18px 22px;

  text-decoration:none;

  box-shadow:
    0 0 0 6px #000 inset,
    0 0 0 6px #fff;

  transition:transform .08s linear;
}
#enter:hover{transform:translateY(-2px)}
#enter:active{transform:translateY(0)}

@media (prefers-reduced-motion: reduce){
  canvas{display:none}
}
</style>
</head>

<body>

<div id="wrap">
  <canvas id="c"></canvas>
</div>

<div id="ui">
  <div id="warn">
    EPILEPSY WARNING: THIS SITE MAY CAUSE SEIZURE
  </div>
  <a id="enter" href="https://ketadata.com/index11.html">ENTER</a>
</div>

<script>
/* =========================================================
   WHITE SQUARE CASCADE GRID
========================================================= */

const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d", { alpha:false });

let w,h,dpr;
function resize(){
  dpr = window.devicePixelRatio || 1;
  w = innerWidth; h = innerHeight;
  canvas.width = Math.floor(w*dpr);
  canvas.height = Math.floor(h*dpr);
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
addEventListener("resize", resize);
resize();

function cssNum(name, fallback){
  const v = parseFloat(getComputedStyle(document.documentElement).getPropertyValue(name));
  return Number.isFinite(v) ? v : fallback;
}

let tile=26, cols=0, colX=[];
function rebuildGrid(){
  const base = cssNum("--tile", 26);
  const varr = cssNum("--tileVar", 10);
  const hint = Math.max(20, Math.round(cssNum("--colsHint", 52)));

  const fromHint = Math.max(18, Math.floor(w / hint));
  tile = Math.max(18, Math.round(
    base*0.55 + fromHint*0.45 + (Math.random()*2-1)*(varr*0.25)
  ));

  cols = Math.ceil(w / tile);
  colX = new Array(cols).fill(0).map((_,i)=> i*tile);
}
rebuildGrid();
addEventListener("resize", rebuildGrid);

const blocks=[];
function spawnBlock(col,y,sizeMul=1){
  const s = tile * sizeMul;
  blocks.push({
    x: colX[col],
    y,
    s,
    vy: cssNum("--speedMin",240) +
        Math.random()*(cssNum("--speedMax",820)-cssNum("--speedMin",240))
  });
}

function maybeSpawn(){
  const spawnRate = cssNum("--spawnRate",0.22);
  const clusterChance = cssNum("--clusterChance",0.32);
  const clusterMax = Math.max(1,Math.round(cssNum("--clusterMax",4)));

  for(let c=0;c<cols;c++){
    if(Math.random()<spawnRate){
      const clump = Math.random()<clusterChance
        ? 2+(Math.random()*(clusterMax-1)|0)
        : 1;

      for(let k=0;k<clump;k++){
        const big = Math.random()<0.18 ? 2 : 1;
        spawnBlock(c,-tile-k*(tile*0.8),big);
      }
    }
  }
}

let last=performance.now();
function frame(now){
  const dt=Math.max(0.001,(now-last)/1000);
  last=now;

  ctx.fillStyle=`rgba(0,0,0,${cssNum("--trail",0.16)})`;
  ctx.fillRect(0,0,w,h);

  maybeSpawn();

  ctx.fillStyle="#fff";
  for(let i=blocks.length-1;i>=0;i--){
    const b=blocks[i];
    b.y+=b.vy*dt;
    ctx.fillRect(b.x,b.y,b.s,b.s);
    if(b.y>h+b.s) blocks.splice(i,1);
  }

  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);

addEventListener("keydown",e=>{
  if(e.key==="Enter") location.href="https://ketadata.com/index11.html";
});
</script>

<!-- ============================================================
KETADATA HTML SERIALIZATION STAMP
AE/EE/WB: AE
FILE_ID: CASCADE_GRID_CIG_WARNING_V1
ROOM_ID: COVER
VERSION: v1
UPDATED_AT: 2025-12-28
CHANGELOG:
- WARNING UPDATED TO CIGARETTE-STYLE SEIZURE LABEL
- CASCADE GRID KEPT INTACT
============================================================ -->
</body>
</html>
