<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Liquid Silver Field</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: radial-gradient(circle at center, #1a1a1a, #0f0f0f 70%);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
    }
    #canvas { 
        display: block; 
    }
    #info {
        position: absolute;
        top: 24px;
        left: 50%;
        transform: translateX(-50%);
        color: rgba(200,200,220,0.5);
        font-size: 13px;
        letter-spacing: 0.06em;
        user-select: none;
        pointer-events: none;
        transition: opacity 1.2s ease;
    }
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="info">SPACE: toggle flow â€¢ CLICK: spawn ripple</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;
let ripples = [];
let animating = false;
let t = 0;

class Ripple {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.r = 1;
        this.max = Math.random() * 180 + 260;
        this.speed = Math.random() * 0.6 + 0.8;
        this.alpha = Math.random() * 0.35 + 0.45;
    }
    update() {
        this.r += this.speed;
    }
    draw() {
        let fade = 1 - this.r / this.max;
        if (fade < 0) return;

        ctx.beginPath();
        ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
        ctx.strokeStyle = `rgba(230,230,245,${fade * this.alpha})`;
        ctx.lineWidth = Math.max(0.4, 3 * fade);

        ctx.shadowBlur = 18 * fade;
        ctx.shadowColor = `rgba(220,220,240,${fade * 0.8})`;
        ctx.stroke();
        ctx.shadowBlur = 0;
    }
    dead() {
        return this.r > this.max;
    }
}

function logic() {
    ctx.fillStyle = "rgba(15,15,18,0.08)";
    ctx.fillRect(0, 0, width, height);

    t++;

    if (Math.random() > 0.96) {
        let rx = Math.random() * width;
        let ry = Math.random() * height;
        ripples.push(new Ripple(rx, ry));
    }

    if (t % 200 === 0) {
        let cx = width / 2;
        let cy = height / 2;
        let count = 7;
        for (let i = 0; i < count; i++) {
            let ang = (Math.PI * 2 / count) * i;
            ripples.push(new Ripple(cx + Math.cos(ang) * 130, cy + Math.sin(ang) * 130));
        }
    }

    ripples.forEach(r => {
        r.update();
        r.draw();
    });

    ripples = ripples.filter(r => !r.dead());

    if (animating) requestAnimationFrame(logic);
}

function start() {
    document.getElementById("info").style.opacity = "0";
    animating = true;
    logic();
}

function stop() {
    animating = false;
    ctx.fillStyle = "#101010";
    ctx.fillRect(0, 0, width, height);
    document.getElementById("info").style.opacity = "0.65";
    ripples = [];
}

document.addEventListener("keydown", e => {
    if (e.code === "Space") {
        animating ? stop() : start();
        e.preventDefault();
    }
});

canvas.addEventListener("click", e => {
    if (animating) ripples.push(new Ripple(e.clientX, e.clientY));
});

window.addEventListener("resize", () => {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
});
</script>
</body>
</html>
