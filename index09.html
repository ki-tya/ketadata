<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>KETADATA // WHITE-HOT CAPILLARY</title>

<style>
:root{
  --bg:#000;
  --ink:#fff;

  /* persistence */
  --trail:0.030;          /* lower = longer burn */
  --density:1.85;         /* more columns active */
  --speed:1.12;

  /* grid */
  --font:12px;
  --lh:14px;
  --colW:9.15;

  /* white-hot thickness */
  --hotPasses:5;          /* overlapping draws per glyph */
  --hotJitter:1.6;        /* px jitter (erratic) */
  --hotSmear:2;           /* extra vertical smears */
  --alphaMin:0.92;
  --alphaMax:1.00;

  /* burn-through etch (no glow) */
  --etchAlpha:0.85;
  --etchStep:1;

  /* black depth */
  --vignette:0.95;
  --crush:0.24;
  --grain:0.12;

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  overflow:hidden;
  font-family:var(--mono);
}

/* deep black clamps */
#crush{
  position:fixed; inset:0; z-index:0;
  pointer-events:none;
  opacity:var(--crush);
  background: radial-gradient(circle at 50% 55%, transparent 40%, #000 100%);
}
#vignette{
  position:fixed; inset:0; z-index:1;
  pointer-events:none;
  opacity:var(--vignette);
  background: radial-gradient(circle at 50% 55%, transparent 54%, #000 100%);
}
#grain{
  position:fixed; inset:0; z-index:2;
  pointer-events:none;
  opacity:var(--grain);
  mix-blend-mode:overlay;
  filter:url(#grainFilter);
}

/* field */
#wrap{position:fixed; inset:0; z-index:3}
canvas{
  width:100%;
  height:100%;
  image-rendering:pixelated;
}

/* UI minimal, brutal */
#ui{position:fixed; inset:0; z-index:5; pointer-events:none; user-select:none}
#warn{
  position:absolute; top:12px; left:12px;
  pointer-events:auto;
  font-size:10px;
  letter-spacing:.22em;
  padding:8px 10px;
  border:2px solid rgba(255,255,255,.20);
  color:#fff;
  background:rgba(0,0,0,.06);
}
#enter{
  position:absolute; right:12px; bottom:12px;
  pointer-events:auto;
  font-size:11px;
  letter-spacing:.26em;
  padding:10px 12px;
  border:2px solid rgba(255,255,255,.20);
  color:#fff;
  text-decoration:none;
  background:rgba(0,0,0,.05);
}
#enter:hover{background:#fff;color:#000}

@media (prefers-reduced-motion: reduce){
  #crush,#vignette,#grain{display:none}
  canvas{display:none}
}
</style>
</head>

<body>
<svg width="0" height="0" style="position:absolute">
  <filter id="grainFilter">
    <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" seed="14"/>
    <feColorMatrix type="matrix" values="
      1 0 0 0 0
      0 1 0 0 0
      0 0 1 0 0
      0 0 0 0.18 0"/>
  </filter>
</svg>

<div id="crush"></div>
<div id="vignette"></div>
<div id="grain"></div>

<div id="wrap">
  <canvas id="c"></canvas>
</div>

<div id="ui">
  <div id="warn">WARNING: HIGH CONTRAST</div>
  <a id="enter" href="https://ketadata.com/index11.html">[ENTER]</a>
</div>

<script>
/* =========================================================
   WHITE-HOT CAPILLARY (ERRATIC + OVERLAPPING, NO GLOW)
   - straight columns down
   - white-hot overlap jitter
   - burn-through via difference etch
========================================================= */

const TARGET_URL="https://ketadata.com/index11.html";
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d",{alpha:true});

let w,h,dpr;
function resize(){
  dpr=window.devicePixelRatio||1;
  w=innerWidth; h=innerHeight;
  canvas.width=Math.floor(w*dpr);
  canvas.height=Math.floor(h*dpr);
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
addEventListener("resize",resize); resize();

function cssNum(name,fallback){
  const v=parseFloat(getComputedStyle(document.documentElement).getPropertyValue(name));
  return Number.isFinite(v)?v:fallback;
}

function brailleDense(){
  // bias toward dense blocks (white-hot)
  const r=Math.random();
  if(r<0.70) return String.fromCharCode(0x2800+(0xC0+(Math.random()*64|0)));
  if(r<0.98) return String.fromCharCode(0x2800+(Math.random()*256|0));
  return String.fromCharCode(0x28FF);
}

const colW=()=>cssNum("--colW",9.15);
const lh =()=>cssNum("--lh",14);
const fontPx=()=>cssNum("--font",12);

let cols=0, drops=[];
function resetDrops(){
  cols=Math.ceil(w/colW());
  drops=new Array(cols).fill(0).map(()=>({
    y:Math.random()*h,
    v:1.0+Math.random()*2.8,
    // capillary “pulse” per column
    p:Math.random()*Math.PI*2,
    // occasional spasms
    spasm:Math.random(),
    // lateral micro-offset per column (still straight lines overall)
    xoff:(Math.random()<0.5?-0.15:0.15)
  }));
}
resetDrops();
addEventListener("resize",resetDrops);

function tick(){
  const trail=cssNum("--trail",0.03);
  const density=cssNum("--density",1.85);
  const speedMul=cssNum("--speed",1.12);

  const hotPasses=Math.max(1,Math.min(9,Math.round(cssNum("--hotPasses",5))));
  const hotJitter=cssNum("--hotJitter",1.6);
  const hotSmear=Math.max(0,Math.min(6,Math.round(cssNum("--hotSmear",2))));
  const aMin=cssNum("--alphaMin",0.92);
  const aMax=cssNum("--alphaMax",1.00);

  const etchAlpha=cssNum("--etchAlpha",0.85);
  const etchStep=Math.max(1,Math.round(cssNum("--etchStep",1)));

  // burn trail in black
  ctx.fillStyle=`rgba(0,0,0,${trail})`;
  ctx.fillRect(0,0,w,h);

  const t=performance.now()/1000;

  // column step based on density
  const step=Math.max(1, 1 + Math.floor(1.0/Math.max(0.45,density)));

  ctx.save();
  ctx.textBaseline="top";
  ctx.font=`900 ${fontPx()}px ${getComputedStyle(document.body).fontFamily}`;
  ctx.shadowBlur=0; // NO GLOW

  for(let i=0;i<cols;i+=step){
    const d=drops[i];
    const xBase=i*colW();

    // pulse + occasional spasms (erratic)
    const pulse=0.78 + 0.22*Math.sin(t*0.95 + d.p);
    const spasmKick = (Math.random() < 0.010 + d.spasm*0.006) ? (1.25 + Math.random()*0.9) : 1.0;
    const speed = d.v * pulse * speedMul * spasmKick;

    const y=d.y;

    const ch=brailleDense();
    const hardAlpha = aMin + Math.random()*(aMax-aMin);

    // WHITE-HOT OVERLAP (multiple passes with micro jitter)
    ctx.globalCompositeOperation="source-over";
    for(let k=0;k<hotPasses;k++){
      const jx = (Math.random()*2-1) * hotJitter * (k/hotPasses);
      const jy = (Math.random()*2-1) * (hotJitter*0.55) * (k/hotPasses);
      ctx.globalAlpha = hardAlpha;
      ctx.fillStyle = "#ffffff";
      ctx.fillText(ch, xBase + d.xoff + jx, y + jy);
    }

    // vertical smears (capillary streaks, still straight down)
    for(let s=1;s<=hotSmear;s++){
      if(Math.random()<0.45){
        ctx.globalAlpha = 0.55 + Math.random()*0.35;
        ctx.fillText(ch, xBase + d.xoff, y - lh()*s);
      }
    }

    // BURN-THROUGH ETCH (difference) — sharp, harsh
    ctx.globalCompositeOperation="difference";
    ctx.globalAlpha = etchAlpha;
    ctx.fillText(ch, xBase + etchStep, y);
    ctx.fillText(ch, xBase, y + etchStep);

    // reset mode
    ctx.globalCompositeOperation="source-over";

    d.y += lh()*speed;

    if(d.y > h + 90){
      d.y = -Math.random()*520;
      d.v = 1.0 + Math.random()*3.2;
      d.p = Math.random()*Math.PI*2;
      d.spasm = Math.random();
    }
  }

  ctx.restore();
  requestAnimationFrame(tick);
}
tick();

addEventListener("keydown",(e)=>{
  if(e.key==="Enter") location.href=TARGET_URL;
});
</script>

<!-- ============================================================
KETADATA HTML SERIALIZATION STAMP
AE/EE/WB: AE
FILE_ID: BRAILLE_WHITEHOT_CAPILLARY_V1
ROOM_ID: COVER
VERSION: v1
UPDATED_AT: 2025-12-28T00:00:00-05:00
CHANGELOG:
- PURE WHITE INK (NO GRAY) + NO GLOW / NO HAZE / NO BLOOM
- WHITE-HOT: MULTI-PASS OVERLAP JITTER PER GLYPH (ERRATIC)
- CAPILLARY STREAKS: VERTICAL SMEARS (STRAIGHT DOWN)
- BURN-THROUGH: DIFFERENCE ETCH PASSES (HARSH CUT INTO BLACK)
============================================================ -->
</body>
</html>
