<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KETADATA</title>

  <style>
    :root{
      --void:#000;
      --paper:#0a0a0a;

      /* aggressive techno bunker laser palette */
      --laser:#ff0033;          /* punchier red */
      --darkroom:#4a000a;       /* rich, dried-blood red */
      --uv:#7a00ff;             /* UV accent */
      --white:#fff;

      --hair: rgba(255,255,255,.14);
      --hair2: rgba(255,255,255,.08);

      /* defaults: Arial per request (you can switch via the Type Tester) */
      --nameFont: Arial, sans-serif;
      --uiFont: Arial, sans-serif;

      /* title sizing is auto-fit via JS; CSS provides a fallback */
      --titleClamp: clamp(96px, 14vw, 22rem);

      --linkRest:#666;
      --linkHover:#fff;
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      background: var(--void);
      color: var(--white);
      font-family: var(--uiFont);
      overflow-x:hidden;

      /* one-screen snap: landing -> directory */
      scroll-snap-type: y mandatory;
      scroll-snap-stop: always;
    }

    section{
      height:100vh;
      scroll-snap-align:start;
      overflow:hidden;
      position:relative;
    }

    /* =========
       LINKS
    ========= */
    a.klink{
      color: var(--linkRest);
      text-decoration:none;
      font-family: var(--uiFont);
      letter-spacing:.18em;
      text-transform:uppercase;
      font-weight:800;
      font-size: 12px;
      transition: color .15s ease, transform .15s ease;
    }
    a.klink:hover{
      color: var(--linkHover);
      transform: translateY(-1px);
    }

    /* =========================
       PAGE 1: LANDING (BIG TITLE)
    ========================== */
    .landing{
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 0 1.6vw; /* minimal margins, but still safe */
      text-align:center;
      background:
        radial-gradient(800px 400px at 50% 52%, rgba(255,0,51,.06), transparent 70%),
        radial-gradient(700px 360px at 70% 35%, rgba(122,0,255,.05), transparent 70%),
        var(--void);
    }

    .titleWrap{
      width: 100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 2.2vh;
    }

    .title{
      margin:0;
      padding:0;
      font-family: var(--nameFont);
      font-weight: 900;
      letter-spacing: .06em;
      text-transform: uppercase;
      line-height: .88;
      user-select:none;

      white-space:nowrap; /* force single line */
      display:inline-flex;
      align-items:baseline;
      justify-content:center;

      /* fallback, JS will override via --titleSize */
      font-size: var(--titleSize, var(--titleClamp));
    }

    .slashes{
      font-family: var(--nameFont);
      font-weight: 900;
      letter-spacing: .25em;
      margin: 0 .14em;
      display:inline-block;
      opacity: .98;
    }

    .navRow{
      display:flex;
      justify-content:center;
      align-items:center;
      gap: 2.4vw;
      flex-wrap:wrap;
    }

    .warning{
      text-align:center;
      font-size: 11px;
      letter-spacing: .22em;
      text-transform: uppercase;
      color: rgba(255,255,255,.70);
      line-height: 1.6;
      padding: 10px 14px;
      border: 1px dashed rgba(255,0,51,.55);
      border-radius: 14px;
      background: rgba(255,0,51,.10);
      max-width: 760px;
    }
    .warning b{
      color: var(--laser);
      letter-spacing:.26em;
    }

    .hint{
      position:absolute;
      bottom: 22px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: rgba(255,255,255,.55);
      display:flex;
      align-items:center;
      gap: 10px;
      user-select:none;
      font-family: var(--uiFont);
    }
    .arrow{
      display:inline-block;
      opacity:.7;
      animation: bob 1.4s ease-in-out infinite;
    }
    @keyframes bob{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(6px); }
    }

    /* =========================
       TYPE TESTER
    ========================== */
    .typeTester{
      position: fixed;
      top: 18px;
      right: 18px;
      width: 260px;
      border: 1px solid var(--hair);
      border-radius: 14px;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      padding: 12px;
      z-index: 2000;
      font-family: var(--uiFont);
    }
    .typeTester h3{
      margin:0 0 10px 0;
      font-size: 11px;
      letter-spacing:.18em;
      text-transform: uppercase;
      color: rgba(255,255,255,.82);
      font-weight: 900;
    }
    .typeTester .lbl{
      font-size: 10px;
      letter-spacing:.16em;
      text-transform: uppercase;
      opacity:.72;
      margin: 10px 0 6px;
      display:block;
    }
    .typeTester select{
      width: 100%;
      border: 1px solid var(--hair);
      border-radius: 10px;
      padding: 9px 10px;
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.92);
      font-family: var(--uiFont);
      outline:none;
    }
    .typeTester .meta{
      margin-top: 10px;
      font-size: 10px;
      letter-spacing:.14em;
      opacity:.70;
      line-height: 1.45;
    }

    /* =========================
       MEOW ticker (hidden unless flashing)
    ========================== */
    .meow-ticker{
      position: fixed;
      bottom: 120px;
      left: 0;
      width: 100%;
      color: rgba(255,255,255,.88);
      padding: 12px 0;
      overflow: hidden;
      white-space: nowrap;
      font-family: var(--uiFont);
      font-size: 13px;
      font-weight: 900;
      letter-spacing: .22em;
      text-transform: uppercase;
      z-index: 1000;
      mix-blend-mode: screen;
      opacity: 0;
      pointer-events:none;
      transition: opacity .12s linear;
    }
    body.flashing .meow-ticker{ opacity:1; }

    .meow-content{
      display:inline-block;
      animation: ticker 34s linear infinite;
      will-change: transform;
    }
    @keyframes ticker{
      0%   { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    /* =========================
       PAGE 2: DIRECTORY (ONE SCREEN)
    ========================== */
    .directory{
      border-top: 1px solid var(--hair);
      padding: 18px;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      background:
        radial-gradient(900px 520px at 50% 10%, rgba(74,0,10,.18), transparent 68%),
        radial-gradient(720px 420px at 70% 90%, rgba(122,0,255,.06), transparent 70%),
        var(--void);
    }

    .dirWrap{
      width: min(1180px, 92vw);
      height: min(86vh, 860px);
      display:flex;
      flex-direction:column;
    }

    .dirHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 14px;
      padding: 10px 0 14px;
      border-bottom: 1px solid var(--hair);
      margin-bottom: 12px;
      flex: 0 0 auto;
    }

    .dirTitle{
      display:flex;
      flex-direction:column;
      gap: 8px;
      min-width: 220px;
    }

    .brandline{
      display:flex;
      align-items:baseline;
      gap: 10px;
      line-height: 1;
      user-select:none;
      white-space:nowrap;
      font-family: var(--uiFont);
    }
    .brandline .k,
    .brandline .d{
      font-weight: 900;
      letter-spacing: .16em;
      text-transform: uppercase;
      font-size: 12px;
    }
    .brandline .slashes2{
      font-weight: 900;
      letter-spacing: .28em;
      opacity:.95;
    }

    .dirQuick{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      margin-top: 2px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      padding: 7px 10px;
      border: 1px solid var(--hair);
      border-radius: 999px;
      text-decoration:none;
      color: rgba(255,255,255,.88);
      font-family: var(--uiFont);
      font-size: 11px;
      letter-spacing: .14em;
      background: rgba(255,255,255,.02);
      transition: border-color .2s ease, background .2s ease, color .2s ease;
      text-transform: uppercase;
      font-weight: 900;
    }
    .pill:hover{
      border-color: rgba(255,255,255,.35);
      background: rgba(255,255,255,.04);
      color: var(--laser);
    }

    .controls{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      padding: 8px 0 10px;
      flex: 0 0 auto;
    }

    .searchbox{
      flex: 1 1 360px;
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border: 1px solid var(--hair);
      border-radius: 12px;
      background: rgba(255,255,255,.02);
      min-width: 280px;
    }
    .searchbox span{
      font-family: var(--uiFont);
      opacity:.65;
      letter-spacing:.14em;
      font-size: 11px;
      white-space:nowrap;
      text-transform: uppercase;
      font-weight: 900;
    }
    input[type="text"]{
      width: 100%;
      border:none;
      outline:none;
      background:transparent;
      color: rgba(255,255,255,.92);
      font-family: var(--uiFont);
      font-size: 11px;
      letter-spacing: .12em;
      text-transform: uppercase;
      font-weight: 800;
    }

    .filters{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border: 1px solid var(--hair);
      border-radius: 12px;
      background: rgba(255,255,255,.02);
      cursor:pointer;
      user-select:none;
      font-family: var(--uiFont);
      letter-spacing: .12em;
      font-size: 11px;
      color: rgba(255,255,255,.66);
      transition: border-color .2s ease, background .2s ease, color .2s ease;
      text-transform: uppercase;
      font-weight: 900;
    }
    .chip[data-active="true"]{
      border-color: rgba(255,255,255,.35);
      color: rgba(255,255,255,.95);
      background: rgba(255,255,255,.04);
    }
    .chip .dot{
      width: 6px; height: 6px; border-radius: 50%;
      background: rgba(255,255,255,.25);
    }
    .chip[data-active="true"] .dot{ background: var(--laser); }

    main.grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 6px;
      flex: 1 1 auto;
      min-height: 0;
      overflow: auto;
      padding-bottom: 8px;
    }

    @media (max-width: 900px){
      main.grid{ grid-template-columns: 1fr; }
      .dirQuick{ justify-content:flex-start; }
      .typeTester{ width: 240px; }
    }

    .panel{
      border: 1px solid var(--hair);
      border-radius: 14px;
      background: rgba(255,255,255,.02);
      overflow:hidden;
    }
    .panelHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border-bottom: 1px solid var(--hair2);
      background: rgba(0,0,0,.35);
    }
    .panelHeader b{
      font-family: var(--uiFont);
      letter-spacing: .16em;
      font-weight: 900;
      font-size: 11px;
      text-transform: uppercase;
    }
    .panelHeader .meta{
      font-family: var(--uiFont);
      color: rgba(255,255,255,.62);
      letter-spacing: .12em;
      white-space:nowrap;
      font-size: 11px;
      text-transform: uppercase;
      font-weight: 800;
    }

    .list{ padding: 6px 0; }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 9px 12px;
      border-top: 1px solid rgba(255,255,255,.04);
    }
    .row:first-child{ border-top:none; }
    .row:hover{ background: rgba(255,255,255,.03); }

    .left{
      display:flex;
      flex-direction:column;
      gap: 2px;
      min-width:0;
    }
    a.a{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      text-decoration:none;
      color: rgba(255,255,255,.90);
      font-family: var(--uiFont);
      letter-spacing: .12em;
      min-width:0;
      font-size: 11px;
      text-transform: uppercase;
      font-weight: 900;
    }
    .a .name{
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .a:hover .name{ color: var(--laser); }

    .desc{
      color: rgba(255,255,255,.62);
      font-family: var(--uiFont);
      letter-spacing: .04em;
      font-size: 11px;
    }

    .tags{
      display:flex;
      gap: 6px;
      flex-wrap:wrap;
      justify-content:flex-end;
      flex: 0 0 auto;
    }
    .tag{
      font-family: var(--uiFont);
      font-size: 10px;
      letter-spacing: .12em;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.68);
      background: rgba(255,255,255,.02);
      text-transform: uppercase;
      font-weight: 900;
    }
    .tag.red{ border-color: rgba(255,0,51,.55); color: rgba(255,0,51,.98); }
    .tag.uv{ border-color: rgba(122,0,255,.55); color: rgba(122,0,255,.98); }

    .footer{
      margin-top: 10px;
      padding: 10px 0 0;
      border-top: 1px solid var(--hair);
      color: rgba(255,255,255,.62);
      font-family: var(--uiFont);
      letter-spacing: .10em;
      font-size: 11px;
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      justify-content:space-between;
      flex: 0 0 auto;
      text-transform: uppercase;
      font-weight: 900;
    }
    .kbd{
      border: 1px solid rgba(255,255,255,.2);
      border-bottom-color: rgba(255,255,255,.35);
      padding: 2px 6px;
      border-radius: 6px;
      color: rgba(255,255,255,.85);
      background: rgba(255,255,255,.02);
      font-family: var(--uiFont);
      font-weight: 900;
    }

    /* =========================
       STROBE (spacebar)
    ========================== */
    body.flashing{
      animation: flashBW 0.125s infinite;
    }
    @keyframes flashBW{
      0%{ background:#000; }
      50%{ background:#fff; }
      100%{ background:#000; }
    }
  </style>
</head>

<body>

  <!-- TYPE TESTER -->
  <div class="typeTester">
    <h3>TYPE TESTER</h3>
    <span class="lbl">NAME FONT</span>
    <select id="nameFont">
      <option value="Arial, sans-serif">Arial</option>
      <option value="Helvetica Neue, Helvetica, Arial, sans-serif">Helvetica Neue</option>
      <option value="Inter, system-ui, -apple-system, Arial, sans-serif">Inter</option>
      <option value="SF Pro Display, system-ui, -apple-system, Arial, sans-serif">SF Pro Display</option>
      <option value="Avenir Next, Avenir, Arial, sans-serif">Avenir Next</option>
      <option value="DIN Condensed, Arial Narrow, Arial, sans-serif">DIN Condensed</option>
      <option value="Impact, Haettenschweiler, Arial Black, sans-serif">Impact</option>
      <option value="Bahnschrift, Arial, sans-serif">Bahnschrift</option>
      <option value="Gill Sans, Gill Sans MT, Arial, sans-serif">Gill Sans</option>
      <option value="Trebuchet MS, Arial, sans-serif">Trebuchet</option>
    </select>

    <span class="lbl">UI FONT</span>
    <select id="uiFont">
      <option value="Arial, sans-serif">Arial</option>
      <option value="Helvetica Neue, Helvetica, Arial, sans-serif">Helvetica Neue</option>
      <option value="Inter, system-ui, -apple-system, Arial, sans-serif">Inter</option>
      <option value="SF Pro Text, system-ui, -apple-system, Arial, sans-serif">SF Pro Text</option>
      <option value="IBM Plex Mono, ui-monospace, Menlo, Monaco, Consolas, monospace">IBM Plex Mono</option>
      <option value="JetBrains Mono, ui-monospace, Menlo, Monaco, Consolas, monospace">JetBrains Mono</option>
      <option value="Space Mono, ui-monospace, Menlo, Monaco, Consolas, monospace">Space Mono</option>
      <option value="Roboto Mono, ui-monospace, Menlo, Monaco, Consolas, monospace">Roboto Mono</option>
      <option value="Courier New, ui-monospace, Menlo, Monaco, Consolas, monospace">Courier New</option>
    </select>

    <div class="meta">
      SPACE = STROBE · / = SEARCH · SCROLL = SNAP
    </div>
  </div>

  <!-- PAGE 1 -->
  <section class="landing" id="top">
    <div class="titleWrap">
      <!-- single line title (AUTO-FIT to width) -->
      <div class="title" id="bigTitle" aria-label="KETADATA">
        <span>КЕТА</span><span class="slashes">///</span><span>ДАТА</span>
      </div>

      <div class="navRow" aria-label="primary">
        <a class="klink" href="#directory">[DIRECTORY]</a>
        <a class="klink" href="page2.html">[K-LIGHT]</a>
        <a class="klink" href="map.html">[K-WORLD]</a>
        <a class="klink" href="room.html">[K-ROOM]</a>
        <a class="klink" href="vape-drive.html">[K-APPS]</a>
        <a class="klink" href="shop.html">[SHOP]</a>
        <a class="klink" href="stylebook.html">[STYLEBOOK]</a>
      </div>

      <div class="warning">
        <b>BAD GATEWAY</b><br/>
        MAY TRIGGER SEIZURES IN PHOTOSENSITIVE INDIVIDUALS
      </div>
    </div>

    <div class="hint">
      SCROLL <span class="arrow">↓</span>
    </div>
  </section>

  <!-- MEOW ticker (hidden unless flashing) -->
  <div class="meow-ticker" aria-hidden="true">
    <div class="meow-content">
      MEOW — MIAOU — MIAU — MIAO — MIAUW — MJAU — MJAV — MIAV — MIJAV — MIJAU — MIYAV — MIYAO — MIAAO — MIAOO — MIAOOO — МЯУ — МЯУУ — MYAU — МЬЯУ — МЯУМ — НЯВ — NIAOU — NYA — NYAA — NYAN — にゃー — ニャー — にゃお — にゃーー — 야옹 — 냐아옹 — 냥 — 喵 — 喵喵 —
    </div>
    <div class="meow-content">
      MEOW — MIAOU — MIAU — MIAO — MIAUW — MJAU — MJAV — MIAV — MIJAV — MIJAU — MIYAV — MIYAO — MIAAO — MIAOO — MIAOOO — МЯУ — МЯУУ — MYAU — МЬЯУ — МЯУМ — НЯВ — NIAOU — NYA — NYAA — NYAN — にゃー — ニャー — にゃお — にゃーー — 야옹 — 냐아옹 — 냥 — 喵 — 喵喵 —
    </div>
  </div>

  <!-- PAGE 2 -->
  <section class="directory" id="directory">
    <div class="dirWrap">

      <div class="dirHeader">
        <div class="dirTitle">
          <div class="brandline" title="KETA///DATA">
            <span class="k">KETA</span>
            <span class="slashes2">///</span>
            <span class="d">DATA</span>
          </div>
          <div style="font-family:var(--uiFont); letter-spacing:.14em; color:rgba(255,255,255,.62); font-size:11px; text-transform:uppercase; font-weight:900;">
            DIRECTORY — MASTER INDEX
          </div>
        </div>

        <div class="dirQuick">
          <a class="pill" href="#top">[TOP]</a>
          <a class="pill" href="map.html">[K-WORLD]</a>
          <a class="pill" href="room.html">[K-ROOM]</a>
          <a class="pill" href="library.html">[LIBRARY]</a>
          <a class="pill" href="video.html">[VIDEO]</a>
          <a class="pill" href="fund.html">[FUND]</a>
          <a class="pill" href="shop.html">[SHOP]</a>
        </div>
      </div>

      <div class="controls">
        <div class="searchbox" role="search">
          <span>SEARCH</span>
          <input id="q" type="text" autocomplete="off" spellcheck="false"
                 placeholder="TYPE: WORLD / ROOM / LIBRARY / CAPTURE / MANDALA / SLOP / ETC" />
        </div>

        <div class="filters" aria-label="filters">
          <div class="chip" data-filter="all" data-active="true"><span class="dot"></span>ALL</div>
          <div class="chip" data-filter="core"><span class="dot"></span>CORE</div>
          <div class="chip" data-filter="world"><span class="dot"></span>WORLD</div>
          <div class="chip" data-filter="room"><span class="dot"></span>ROOM</div>
          <div class="chip" data-filter="library"><span class="dot"></span>LIBRARY</div>
          <div class="chip" data-filter="video"><span class="dot"></span>VIDEO</div>
          <div class="chip" data-filter="tools"><span class="dot"></span>TOOLS</div>
          <div class="chip" data-filter="portals"><span class="dot"></span>PORTALS</div>
          <div class="chip" data-filter="commerce"><span class="dot"></span>COMMERCE</div>
          <div class="chip" data-filter="apps"><span class="dot"></span>APPS</div>
        </div>
      </div>

      <main class="grid" id="grid">
        <!-- CORE -->
        <section class="panel">
          <div class="panelHeader"><b>CORE</b><span class="meta">ENTRY / NAV / SYSTEM</span></div>
          <div class="list">
            <div class="row data-item" data-tags="core" data-name="index.html landing">
              <div class="left">
                <a class="a" href="index.html"><span class="name">INDEX.HTML</span></a>
                <div class="desc">Landing gateway.</div>
              </div>
              <div class="tags"><span class="tag">VOID</span><span class="tag red">RECORD</span></div>
            </div>

            <div class="row data-item" data-tags="core" data-name="desktop.html desktop">
              <div class="left">
                <a class="a" href="desktop.html"><span class="name">DESKTOP.HTML</span></a>
                <div class="desc">Home-base / command surface.</div>
              </div>
              <div class="tags"><span class="tag">HOME</span></div>
            </div>

            <div class="row data-item" data-tags="core" data-name="nav.html navigation">
              <div class="left">
                <a class="a" href="nav.html"><span class="name">NAV.HTML</span></a>
                <div class="desc">Navigation index (legacy / alternate).</div>
              </div>
              <div class="tags"><span class="tag">NAV</span></div>
            </div>

            <div class="row data-item" data-tags="core portals" data-name="login.html login">
              <div class="left">
                <a class="a" href="login.html"><span class="name">LOGIN.HTML</span></a>
                <div class="desc">Account threshold.</div>
              </div>
              <div class="tags"><span class="tag">PORTAL</span></div>
            </div>

            <div class="row data-item" data-tags="core" data-name="1.html 2.html 3.html 4.html 5.html 6.html">
              <div class="left">
                <a class="a" href="1.html"><span class="name">1.HTML → 6.HTML</span></a>
                <div class="desc">Numbered entry pages.</div>
              </div>
              <div class="tags"><span class="tag">NUM</span></div>
            </div>
          </div>
        </section>

        <!-- WORLD -->
        <section class="panel">
          <div class="panelHeader"><b>WORLD</b><span class="meta">OBSERVATORY / MAP</span></div>
          <div class="list">
            <div class="row data-item" data-tags="world" data-name="map.html world observatory globe">
              <div class="left">
                <a class="a" href="map.html"><span class="name">MAP.HTML</span></a>
                <div class="desc">K-WORLD. Filter to intensify.</div>
              </div>
              <div class="tags"><span class="tag">GLOBE</span></div>
            </div>

            <div class="row data-item" data-tags="world tools" data-name="dmt.html dmt2.html dmt3.html dmt4.html dmtzoom.html">
              <div class="left">
                <a class="a" href="dmt.html"><span class="name">DMT.HTML → DMTZOOM.HTML</span></a>
                <div class="desc">World variants / zoom / experiments.</div>
              </div>
              <div class="tags"><span class="tag">VARIANTS</span></div>
            </div>
          </div>
        </section>

        <!-- ROOM -->
        <section class="panel">
          <div class="panelHeader"><b>ROOM</b><span class="meta">SENSORY / DARKROOM</span></div>
          <div class="list">
            <div class="row data-item" data-tags="room" data-name="room.html sensory room">
              <div class="left">
                <a class="a" href="room.html"><span class="name">ROOM.HTML</span></a>
                <div class="desc">Sensory room. Control surface potential.</div>
              </div>
              <div class="tags"><span class="tag">A/V</span></div>
            </div>

            <div class="row data-item" data-tags="room" data-name="room2.html">
              <div class="left">
                <a class="a" href="room2.html"><span class="name">ROOM2.HTML</span></a>
                <div class="desc">Room variant.</div>
              </div>
              <div class="tags"><span class="tag">ALT</span></div>
            </div>

            <div class="row data-item" data-tags="room" data-name="darkroom.html red room">
              <div class="left">
                <a class="a" href="darkroom.html"><span class="name">DARKROOM.HTML</span></a>
                <div class="desc">Flooded darkroom red: undeveloping digital film.</div>
              </div>
              <div class="tags"><span class="tag red">DARKROOM</span></div>
            </div>
          </div>
        </section>

        <!-- LIBRARY -->
        <section class="panel">
          <div class="panelHeader"><b>LIBRARY</b><span class="meta">PDF / ARCHIVE</span></div>
          <div class="list">
            <div class="row data-item" data-tags="library" data-name="library.html pdf library">
              <div class="left">
                <a class="a" href="library.html"><span class="name">LIBRARY.HTML</span></a>
                <div class="desc">Library surface.</div>
              </div>
              <div class="tags"><span class="tag">DOCS</span></div>
            </div>

            <div class="row data-item" data-tags="library" data-name="release.html release2.html release3.html release4.html">
              <div class="left">
                <a class="a" href="release.html"><span class="name">RELEASE.HTML → RELEASE4.HTML</span></a>
                <div class="desc">Releases / archive pages.</div>
              </div>
              <div class="tags"><span class="tag">ARCHIVE</span></div>
            </div>
          </div>
        </section>

        <!-- VIDEO -->
        <section class="panel">
          <div class="panelHeader"><b>VIDEO</b><span class="meta">CURATED / SLOPSTREAM</span></div>
          <div class="list">
            <div class="row data-item" data-tags="video" data-name="video.html">
              <div class="left">
                <a class="a" href="video.html"><span class="name">VIDEO.HTML</span></a>
                <div class="desc">Curated video library.</div>
              </div>
              <div class="tags"><span class="tag">CURATION</span></div>
            </div>

            <div class="row data-item" data-tags="video" data-name="video2.html">
              <div class="left">
                <a class="a" href="video2.html"><span class="name">VIDEO2.HTML</span></a>
                <div class="desc">Video variant.</div>
              </div>
              <div class="tags"><span class="tag">ALT</span></div>
            </div>

            <div class="row data-item" data-tags="video tools" data-name="videomanager.html">
              <div class="left">
                <a class="a" href="videomanager.html"><span class="name">VIDEOMANAGER.HTML</span></a>
                <div class="desc">Video manager / curation tooling.</div>
              </div>
              <div class="tags"><span class="tag">TOOLS</span></div>
            </div>

            <div class="row data-item" data-tags="video" data-name="slopstream.html slopstream2.html slopstream3.html">
              <div class="left">
                <a class="a" href="slopstream.html"><span class="name">SLOPSTREAM.HTML → SLOPSTREAM3.HTML</span></a>
                <div class="desc">Stream surfaces.</div>
              </div>
              <div class="tags"><span class="tag red">RECORD</span></div>
            </div>
          </div>
        </section>

        <!-- TOOLS -->
        <section class="panel">
          <div class="panelHeader"><b>TOOLS</b><span class="meta">EDIT / VISUALS</span></div>
          <div class="list">
            <div class="row data-item" data-tags="tools" data-name="editor.html">
              <div class="left">
                <a class="a" href="editor.html"><span class="name">EDITOR.HTML</span></a>
                <div class="desc">Editing software surface.</div>
              </div>
              <div class="tags"><span class="tag">EDIT</span></div>
            </div>

            <div class="row data-item" data-tags="tools" data-name="mandala.html mandala2.html mandala3.html">
              <div class="left">
                <a class="a" href="mandala.html"><span class="name">MANDALA.HTML → MANDALA3.HTML</span></a>
                <div class="desc">Hypnotic patterns / rhythms.</div>
              </div>
              <div class="tags"><span class="tag">RHYTHM</span></div>
            </div>

            <div class="row data-item" data-tags="tools" data-name="ripple.html ripple2.html ripple3.html ripplefull.html ripplegpt.html rippleinfra.html rippleuv.html">
              <div class="left">
                <a class="a" href="ripple.html"><span class="name">RIPPLE.HTML → RIPPLEUV.HTML</span></a>
                <div class="desc">Ripple system variants.</div>
              </div>
              <div class="tags"><span class="tag">INFRA/UV</span><span class="tag uv">UV</span></div>
            </div>
          </div>
        </section>

        <!-- PORTALS -->
        <section class="panel">
          <div class="panelHeader"><b>PORTALS</b><span class="meta">CAPTURE / SUBMIT / ORACLE</span></div>
          <div class="list">
            <div class="row data-item" data-tags="portals" data-name="capture.html">
              <div class="left">
                <a class="a" href="capture.html"><span class="name">CAPTURE.HTML</span></a>
                <div class="desc">Capture surface.</div>
              </div>
              <div class="tags"><span class="tag">AURA</span></div>
            </div>

            <div class="row data-item" data-tags="portals" data-name="submit.html">
              <div class="left">
                <a class="a" href="submit.html"><span class="name">SUBMIT.HTML</span></a>
                <div class="desc">Submit suggestions.</div>
              </div>
              <div class="tags"><span class="tag">INTAKE</span></div>
            </div>

            <div class="row data-item" data-tags="portals" data-name="ball.html oracle">
              <div class="left">
                <a class="a" href="ball.html"><span class="name">BALL.HTML</span></a>
                <div class="desc">Oracle (prophecy cadence).</div>
              </div>
              <div class="tags"><span class="tag">PROPHECY</span></div>
            </div>
          </div>
        </section>

        <!-- COMMERCE -->
        <section class="panel">
          <div class="panelHeader"><b>COMMERCE</b><span class="meta">FUND / SHOP / BOX</span></div>
          <div class="list">
            <div class="row data-item" data-tags="commerce" data-name="fund.html">
              <div class="left">
                <a class="a" href="fund.html"><span class="name">FUND.HTML</span></a>
                <div class="desc">Funding page (public).</div>
              </div>
              <div class="tags"><span class="tag">LEDGER</span></div>
            </div>

            <div class="row data-item" data-tags="commerce" data-name="shop.html">
              <div class="left">
                <a class="a" href="shop.html"><span class="name">SHOP.HTML</span></a>
                <div class="desc">K2 shop.</div>
              </div>
              <div class="tags"><span class="tag">K2</span></div>
            </div>
          </div>
        </section>

        <!-- APPS -->
        <section class="panel">
          <div class="panelHeader"><b>APPS</b><span class="meta">LOGGING / ID</span></div>
          <div class="list">
            <div class="row data-item" data-tags="apps" data-name="vape-drive.html">
              <div class="left">
                <a class="a" href="vape-drive.html"><span class="name">VAPE-DRIVE.HTML</span></a>
                <div class="desc">Logging app surface.</div>
              </div>
              <div class="tags"><span class="tag">LOG</span></div>
            </div>
          </div>
        </section>
      </main>

      <footer class="footer">
        <div>
          <span class="kbd">/</span> FOCUS SEARCH
          <span style="margin-left:10px"></span>
          <span class="kbd">ESC</span> CLEAR
          <span style="margin-left:10px"></span>
          <span class="kbd">ENTER</span> OPEN FIRST RESULT
        </div>
        <div>
          <span class="kbd">SPACE</span> STROBE
        </div>
      </footer>

    </div>
  </section>

  <script>
    // ---------- fonts ----------
    const nameSel = document.getElementById("nameFont");
    const uiSel = document.getElementById("uiFont");

    // defaults (Arial)
    nameSel.value = "Arial, sans-serif";
    uiSel.value = "Arial, sans-serif";

    // ---------- title auto-fit (fills width, consistent across desktops) ----------
    const bigTitle = document.getElementById("bigTitle");
    const page1 = document.querySelector(".landing");

    function fitTitle(){
      if(!bigTitle) return;

      // reset transform to measure accurately
      bigTitle.style.transform = "";

      // available width = viewport - horizontal padding
      const cs = page1 ? getComputedStyle(page1) : getComputedStyle(document.body);
      const padL = parseFloat(cs.paddingLeft) || 0;
      const padR = parseFloat(cs.paddingRight) || 0;
      const maxW = Math.max(320, window.innerWidth - padL - padR);
      const maxH = Math.max(120, window.innerHeight * 0.52); // leave room for nav + warning

      // binary-search font-size in px
      let lo = 80, hi = 1400, best = lo;
      for(let i=0;i<18;i++){
        const mid = (lo + hi) / 2;
        bigTitle.style.setProperty("--titleSize", mid + "px");
        const r = bigTitle.getBoundingClientRect();

        if(r.width <= maxW && r.height <= maxH){
          best = mid;
          lo = mid;
        } else {
          hi = mid;
        }
      }
      bigTitle.style.setProperty("--titleSize", best + "px");

      // final safety: subpixel overflow -> scale down slightly
      const r2 = bigTitle.getBoundingClientRect();
      if(r2.width > maxW){
        const scale = maxW / r2.width;
        bigTitle.style.transform = `scale(${scale})`;
        bigTitle.style.transformOrigin = "center";
      }
    }

    function applyFonts(){
      document.documentElement.style.setProperty("--nameFont", nameSel.value);
      document.documentElement.style.setProperty("--uiFont", uiSel.value);
      fitTitle();
    }

    nameSel.addEventListener("change", applyFonts);
    uiSel.addEventListener("change", applyFonts);

    // ---------- directory filter + search ----------
    const chips = Array.from(document.querySelectorAll(".chip"));
    const items = Array.from(document.querySelectorAll(".data-item"));
    const q = document.getElementById("q");

    let activeFilter = "all";
    let selectedIndex = -1;

    function normalize(s){ return (s || "").toLowerCase().trim(); }

    function apply(){
      const term = normalize(q.value);
      const visible = [];

      items.forEach((el)=>{
        const tags = normalize(el.dataset.tags);
        const name = normalize(el.dataset.name);

        const passFilter = (activeFilter === "all") || tags.split(" ").includes(activeFilter);
        const passSearch = !term || name.includes(term) || tags.includes(term);

        const show = passFilter && passSearch;
        el.style.display = show ? "" : "none";
        if(show) visible.push(el);
      });

      if(visible.length === 0){
        selectedIndex = -1;
      } else {
        selectedIndex = Math.min(Math.max(selectedIndex, 0), visible.length - 1);
      }
      paintSelection(visible);
      return visible;
    }

    function setActiveChip(filter){
      activeFilter = filter;
      chips.forEach(c => c.dataset.active = (c.dataset.filter === filter) ? "true" : "false");
      selectedIndex = 0;
      apply();
    }

    chips.forEach((c)=> c.addEventListener("click", ()=> setActiveChip(c.dataset.filter)));

    q.addEventListener("input", ()=>{
      selectedIndex = 0;
      apply();
    });

    function paintSelection(visible){
      items.forEach(i => i.style.outline = "none");
      if(selectedIndex < 0 || selectedIndex >= visible.length) return;
      const el = visible[selectedIndex];
      el.style.outline = "1px solid rgba(255,255,255,.35)";
      el.style.outlineOffset = "-1px";
      el.scrollIntoView({ block: "nearest", behavior: "smooth" });
    }

    function openSelected(visible){
      if(selectedIndex < 0 || selectedIndex >= visible.length) return;
      const link = visible[selectedIndex].querySelector("a.a");
      if(link) window.location.href = link.getAttribute("href");
    }

    // ---------- strobe: space toggles; ticker only visible while flashing ----------
    let isFlashing = false;
    let flashInterval;

    function startStrobe() {
      document.body.classList.add("flashing");
      document.body.style.backgroundColor = "black";
      flashInterval = setInterval(() => {
        document.body.style.backgroundColor =
          (document.body.style.backgroundColor === "black") ? "white" : "black";
      }, 50);
    }

    function stopStrobe() {
      clearInterval(flashInterval);
      document.body.classList.remove("flashing");
      document.body.style.backgroundColor = "black";
    }

    document.addEventListener("keydown", (event) => {
      // Space toggles strobe
      if (event.key === " " || event.code === "Space") {
        event.preventDefault();
        if (isFlashing) stopStrobe();
        else startStrobe();
        isFlashing = !isFlashing;
        return;
      }

      // directory keyboard UX
      const visible = apply();

      if(event.key === "/"){
        event.preventDefault();
        q.focus();
        q.select();
        return;
      }

      if(event.key === "Escape"){
        if(document.activeElement === q && q.value){
          q.value = "";
          selectedIndex = 0;
          apply();
        }
        return;
      }

      if(event.key === "ArrowDown"){
        event.preventDefault();
        if(visible.length){ selectedIndex = Math.min(selectedIndex + 1, visible.length - 1); paintSelection(visible); }
        return;
      }
      if(event.key === "ArrowUp"){
        event.preventDefault();
        if(visible.length){ selectedIndex = Math.max(selectedIndex - 1, 0); paintSelection(visible); }
        return;
      }
      if(event.key === "Enter"){
        if(document.activeElement === q || visible.length){
          openSelected(visible);
        }
      }
    });

    // init
    applyFonts();
    window.addEventListener("resize", fitTitle);

    setActiveChip("all");
    apply();

    // first-pass fit after layout
    window.addEventListener("load", fitTitle);
  </script>

</body>
</html>
