<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHAKRA SYSTEM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Courier New', monospace;
        }

        #container {
            position: relative;
            width: 600px;
            height: 700px;
        }

        .body-outline {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 600px;
        }

        svg {
            width: 100%;
            height: 100%;
            opacity: 0.4;
        }

        svg line,
        svg ellipse,
        svg path {
            stroke: #666;
            stroke-width: 2;
            fill: none;
        }

        .chakra {
            position: absolute;
            width: 12px;
            height: 12px;
            border: 2px solid;
            cursor: pointer;
            transition: all 0.3s ease;
            left: 50%;
            transform: translateX(-50%);
        }

        .chakra::before {
            content: '';
            position: absolute;
            width: 40px;
            height: 1px;
            background: currentColor;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.3;
        }

        .chakra::after {
            content: '';
            position: absolute;
            width: 1px;
            height: 40px;
            background: currentColor;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.3;
        }

        .chakra:hover,
        .chakra.active {
            transform: translateX(-50%) scale(2);
            box-shadow: 0 0 30px currentColor;
        }

        .chakra:hover::before,
        .chakra:hover::after,
        .chakra.active::before,
        .chakra.active::after {
            opacity: 1;
        }

        .chakra-index {
            position: absolute;
            color: currentColor;
            font-size: 9px;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            letter-spacing: 1px;
            opacity: 0.5;
        }

        .chakra-label {
            position: absolute;
            color: currentColor;
            font-size: 8px;
            text-transform: uppercase;
            letter-spacing: 2px;
            white-space: nowrap;
            opacity: 0.4;
            transition: opacity 0.3s;
        }

        .chakra:hover + .chakra-label,
        .chakra.active + .chakra-label {
            opacity: 1;
        }

        .chakra-label.left {
            right: 35px;
        }

        .chakra-label.right {
            left: 35px;
        }

        .crown { border-color: #9b59b6; color: #9b59b6; top: 40px; }
        .third-eye { border-color: #5f6caf; color: #5f6caf; top: 100px; }
        .throat { border-color: #00a8cc; color: #00a8cc; top: 160px; }
        .heart { border-color: #26a65b; color: #26a65b; top: 240px; }
        .solar { border-color: #f39c12; color: #f39c12; top: 310px; }
        .sacral { border-color: #d35400; color: #d35400; top: 380px; }
        .root { border-color: #c0392b; color: #c0392b; top: 470px; }

        #meditation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            display: none;
            opacity: 0;
            transition: opacity 0.8s;
            z-index: 1000;
        }

        #meditation.active {
            display: flex;
            opacity: 1;
        }

        #kaleidoscope {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .geometric-layer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid;
            opacity: 0.1;
        }

        .hex {
            width: 100px;
            height: 100px;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            position: absolute;
            border: 1px solid;
        }

        .line {
            position: absolute;
            height: 1px;
            background: currentColor;
            transform-origin: center;
            opacity: 0.2;
        }

        .grid-dot {
            position: absolute;
            width: 2px;
            height: 2px;
            background: currentColor;
            opacity: 0.3;
        }

        #closeBtn {
            position: fixed;
            top: 30px;
            right: 30px;
            width: 40px;
            height: 40px;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.2);
            color: rgba(255,255,255,0.5);
            font-size: 20px;
            cursor: pointer;
            z-index: 1001;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
        }

        #closeBtn:hover {
            border-color: rgba(255,255,255,0.8);
            color: rgba(255,255,255,1);
        }

        #chakraInfo {
            position: fixed;
            top: 40px;
            left: 40px;
            color: rgba(255,255,255,0.6);
            font-size: 10px;
            letter-spacing: 3px;
            text-transform: uppercase;
            z-index: 1001;
            display: none;
            line-height: 2;
        }

        #chakraInfo .name {
            font-size: 16px;
            margin-bottom: 10px;
            letter-spacing: 5px;
        }

        #navigationHint {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.3);
            font-size: 9px;
            letter-spacing: 2px;
            z-index: 1001;
            display: none;
            text-align: center;
        }

        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            opacity: 0.05;
        }

        .grid-line-h,
        .grid-line-v {
            position: absolute;
            background: currentColor;
        }

        .grid-line-h {
            width: 100%;
            height: 1px;
        }

        .grid-line-v {
            width: 1px;
            height: 100%;
        }

        .circle-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid;
            border-radius: 50%;
            opacity: 0.15;
        }

        .rotating-square {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid;
            opacity: 0.1;
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="body-outline">
            <svg viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg">
                <!-- Head -->
                <ellipse cx="200" cy="60" rx="40" ry="45"/>
                
                <!-- Neck -->
                <line x1="200" y1="105" x2="200" y2="140"/>
                
                <!-- Shoulders -->
                <line x1="160" y1="150" x2="240" y2="150"/>
                
                <!-- Arms bent in meditation -->
                <path d="M 160 150 Q 120 180 110 240"/>
                <path d="M 240 150 Q 280 180 290 240"/>
                
                <!-- Forearms to hands on knees -->
                <path d="M 110 240 Q 100 280 120 340"/>
                <path d="M 290 240 Q 300 280 280 340"/>
                
                <!-- Hands (mudra) -->
                <circle cx="120" cy="340" r="10"/>
                <circle cx="280" cy="340" r="10"/>
                
                <!-- Torso -->
                <line x1="180" y1="150" x2="180" y2="340"/>
                <line x1="220" y1="150" x2="220" y2="340"/>
                
                <!-- Spine (dashed) -->
                <line x1="200" y1="105" x2="200" y2="380" stroke-dasharray="5,5" opacity="0.5"/>
                
                <!-- Torso width -->
                <path d="M 180 150 Q 150 180 150 260 L 150 320 Q 150 340 180 340"/>
                <path d="M 220 150 Q 250 180 250 260 L 250 320 Q 250 340 220 340"/>
                
                <!-- Hip/Seat base -->
                <ellipse cx="200" cy="360" rx="60" ry="20"/>
                
                <!-- Crossed legs - lotus position -->
                <!-- Left thigh -->
                <path d="M 170 360 Q 130 370 90 390"/>
                <!-- Left shin/foot crossing over -->
                <path d="M 90 390 Q 100 410 140 420 Q 180 425 210 420"/>
                
                <!-- Right thigh -->
                <path d="M 230 360 Q 270 370 310 390"/>
                <!-- Right shin/foot crossing over -->
                <path d="M 310 390 Q 300 410 260 420 Q 220 425 190 420"/>
                
                <!-- Feet detail -->
                <ellipse cx="200" cy="420" rx="50" ry="15"/>
                
                <!-- Knee points -->
                <circle cx="90" cy="390" r="8"/>
                <circle cx="310" cy="390" r="8"/>
                
                <!-- Cross-sections for depth -->
                <line x1="150" y1="200" x2="250" y2="200" opacity="0.4"/>
                <line x1="150" y1="280" x2="250" y2="280" opacity="0.4"/>
            </svg>

            <div class="chakra crown" data-chakra="crown" data-frequency="963" data-index="0">
                <span class="chakra-index">07</span>
            </div>
            <div class="chakra-label left" style="top: 40px;">SAHASRARA</div>
            <div class="chakra-label right" style="top: 40px;">CROWN</div>

            <div class="chakra third-eye" data-chakra="third-eye" data-frequency="852" data-index="1">
                <span class="chakra-index">06</span>
            </div>
            <div class="chakra-label left" style="top: 100px;">AJNA</div>
            <div class="chakra-label right" style="top: 100px;">THIRD EYE</div>

            <div class="chakra throat" data-chakra="throat" data-frequency="741" data-index="2">
                <span class="chakra-index">05</span>
            </div>
            <div class="chakra-label left" style="top: 160px;">VISHUDDHA</div>
            <div class="chakra-label right" style="top: 160px;">THROAT</div>

            <div class="chakra heart" data-chakra="heart" data-frequency="639" data-index="3">
                <span class="chakra-index">04</span>
            </div>
            <div class="chakra-label left" style="top: 240px;">ANAHATA</div>
            <div class="chakra-label right" style="top: 240px;">HEART</div>

            <div class="chakra solar" data-chakra="solar" data-frequency="528" data-index="4">
                <span class="chakra-index">03</span>
            </div>
            <div class="chakra-label left" style="top: 310px;">MANIPURA</div>
            <div class="chakra-label right" style="top: 310px;">SOLAR</div>

            <div class="chakra sacral" data-chakra="sacral" data-frequency="417" data-index="5">
                <span class="chakra-index">02</span>
            </div>
            <div class="chakra-label left" style="top: 380px;">SVADHISTHANA</div>
            <div class="chakra-label right" style="top: 380px;">SACRAL</div>

            <div class="chakra root" data-chakra="root" data-frequency="396" data-index="6">
                <span class="chakra-index">01</span>
            </div>
            <div class="chakra-label left" style="top: 470px;">MULADHARA</div>
            <div class="chakra-label right" style="top: 470px;">ROOT</div>
        </div>
    </div>

    <div id="meditation">
        <div id="kaleidoscope"></div>
        <div id="closeBtn">×</div>
        <div id="chakraInfo">
            <div class="name"></div>
            <div class="freq"></div>
            <div class="index"></div>
        </div>
        <div id="navigationHint">↑ UP / DOWN ↓ — NAVIGATE CHAKRAS — ESC TO EXIT</div>
    </div>

    <script>
        const chakras = document.querySelectorAll('.chakra');
        const meditation = document.getElementById('meditation');
        const kaleidoscope = document.getElementById('kaleidoscope');
        const closeBtn = document.getElementById('closeBtn');
        const chakraInfo = document.getElementById('chakraInfo');
        const navigationHint = document.getElementById('navigationHint');

        let animationFrame;
        let rotation = 0;
        let elements = [];
        let audioContext;
        let oscillators = [];
        let gainNodes = [];
        let currentChakraIndex = -1;
        let isInMeditation = false;

        const chakraOrder = ['crown', 'third-eye', 'throat', 'heart', 'solar', 'sacral', 'root'];
        const chakraData = {
            crown: { name: 'SAHASRARA', color: '#9b59b6', frequency: 963, index: 0 },
            'third-eye': { name: 'AJNA', color: '#5f6caf', frequency: 852, index: 1 },
            throat: { name: 'VISHUDDHA', color: '#00a8cc', frequency: 741, index: 2 },
            heart: { name: 'ANAHATA', color: '#26a65b', frequency: 639, index: 3 },
            solar: { name: 'MANIPURA', color: '#f39c12', frequency: 528, index: 4 },
            sacral: { name: 'SVADHISTHANA', color: '#d35400', frequency: 417, index: 5 },
            root: { name: 'MULADHARA', color: '#c0392b', frequency: 396, index: 6 }
        };

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (!isInMeditation) return;

            if (e.key === 'Escape') {
                stopMeditation();
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                navigateChakra(-1);
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                navigateChakra(1);
            }
        });

        function navigateChakra(direction) {
            let newIndex = currentChakraIndex + direction;
            if (newIndex < 0) newIndex = 6;
            if (newIndex > 6) newIndex = 0;
            
            const chakraType = chakraOrder[newIndex];
            const data = chakraData[chakraType];
            transitionToChakra(data);
        }

        function transitionToChakra(data) {
            currentChakraIndex = data.index;
            
            // Update active state
            chakras.forEach(c => c.classList.remove('active'));
            const activeChakra = document.querySelector(`[data-index="${currentChakraIndex}"]`);
            if (activeChakra) activeChakra.classList.add('active');
            
            // Update info
            chakraInfo.querySelector('.name').textContent = data.name;
            chakraInfo.querySelector('.freq').textContent = `${data.frequency} HZ`;
            chakraInfo.querySelector('.index').textContent = `CHAKRA ${String(currentChakraIndex + 1).padStart(2, '0')}`;
            chakraInfo.style.color = data.color;
            closeBtn.style.color = data.color;
            closeBtn.style.borderColor = data.color;

            // Smooth audio transition
            transitionAudio(data.frequency);
            
            // Update visuals
            updateVisualsColor(data.color);
        }

        chakras.forEach(chakra => {
            chakra.addEventListener('click', () => {
                const chakraType = chakra.dataset.chakra;
                const data = chakraData[chakraType];
                startMeditation(data);
            });
        });

        closeBtn.addEventListener('click', stopMeditation);

        function startMeditation(data) {
            isInMeditation = true;
            currentChakraIndex = data.index;
            meditation.classList.add('active');
            closeBtn.style.display = 'flex';
            chakraInfo.style.display = 'block';
            navigationHint.style.display = 'block';
            
            chakraInfo.querySelector('.name').textContent = data.name;
            chakraInfo.querySelector('.freq').textContent = `${data.frequency} HZ`;
            chakraInfo.querySelector('.index').textContent = `CHAKRA ${String(data.index + 1).padStart(2, '0')}`;
            chakraInfo.style.color = data.color;
            closeBtn.style.color = data.color;
            closeBtn.style.borderColor = data.color;

            chakras.forEach(c => c.classList.remove('active'));
            const activeChakra = document.querySelector(`[data-index="${currentChakraIndex}"]`);
            if (activeChakra) activeChakra.classList.add('active');

            createGeometry(data.color);
            playImmersiveFrequency(data.frequency);
            animate();
        }

        function stopMeditation() {
            isInMeditation = false;
            currentChakraIndex = -1;
            meditation.classList.remove('active');
            closeBtn.style.display = 'none';
            chakraInfo.style.display = 'none';
            navigationHint.style.display = 'none';
            
            chakras.forEach(c => c.classList.remove('active'));
            
            cancelAnimationFrame(animationFrame);
            kaleidoscope.innerHTML = '';
            elements = [];
            
            stopAudio();
        }

        function stopAudio() {
            oscillators.forEach((osc, i) => {
                if (osc) {
                    gainNodes[i].gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 1.5);
                    setTimeout(() => {
                        osc.stop();
                    }, 1500);
                }
            });
            oscillators = [];
            gainNodes = [];
        }

        function transitionAudio(newFrequency) {
            // Fade out old oscillators
            oscillators.forEach((osc, i) => {
                if (osc && gainNodes[i]) {
                    gainNodes[i].gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.8);
                    setTimeout(() => {
                        osc.stop();
                    }, 800);
                }
            });
            
            oscillators = [];
            gainNodes = [];
            
            // Create new audio
            setTimeout(() => {
                playImmersiveFrequency(newFrequency);
            }, 400);
        }

        function createGeometry(color) {
            kaleidoscope.innerHTML = '';
            elements = [];

            const gridOverlay = document.createElement('div');
            gridOverlay.className = 'grid-overlay';
            gridOverlay.style.color = color;
            for (let i = 0; i < 20; i++) {
                const hLine = document.createElement('div');
                hLine.className = 'grid-line-h';
                hLine.style.top = (i * 5) + '%';
                gridOverlay.appendChild(hLine);
                
                const vLine = document.createElement('div');
                vLine.className = 'grid-line-v';
                vLine.style.left = (i * 5) + '%';
                gridOverlay.appendChild(vLine);
            }
            kaleidoscope.appendChild(gridOverlay);

            for (let i = 0; i < 12; i++) {
                const ring = document.createElement('div');
                ring.className = 'circle-ring';
                ring.style.borderColor = color;
                ring.style.width = (100 + i * 80) + 'px';
                ring.style.height = (100 + i * 80) + 'px';
                kaleidoscope.appendChild(ring);
                elements.push({ el: ring, type: 'ring', index: i, color: color });
            }

            for (let i = 0; i < 8; i++) {
                const square = document.createElement('div');
                square.className = 'rotating-square';
                square.style.borderColor = color;
                square.style.width = (150 + i * 60) + 'px';
                square.style.height = (150 + i * 60) + 'px';
                kaleidoscope.appendChild(square);
                elements.push({ el: square, type: 'square', index: i, color: color });
            }

            for (let i = 0; i < 24; i++) {
                const hex = document.createElement('div');
                hex.className = 'hex';
                hex.style.borderColor = color;
                kaleidoscope.appendChild(hex);
                elements.push({ el: hex, type: 'hex', angle: (360 / 24) * i, index: i, color: color });
            }

            for (let i = 0; i < 32; i++) {
                const line = document.createElement('div');
                line.className = 'line';
                line.style.width = '600px';
                line.style.background = color;
                line.style.top = '50%';
                line.style.left = '50%';
                kaleidoscope.appendChild(line);
                elements.push({ el: line, type: 'line', angle: (360 / 32) * i, color: color });
            }

            for (let x = 0; x < 20; x++) {
                for (let y = 0; y < 15; y++) {
                    const dot = document.createElement('div');
                    dot.className = 'grid-dot';
                    dot.style.background = color;
                    dot.style.left = (x * 5) + '%';
                    dot.style.top = (y * 6.66) + '%';
                    kaleidoscope.appendChild(dot);
                    elements.push({ el: dot, type: 'dot', x: x, y: y, color: color });
                }
            }
        }

        function updateVisualsColor(color) {
            elements.forEach(elem => {
                if (elem.type === 'ring' || elem.type === 'square' || elem.type === 'hex') {
                    elem.el.style.borderColor = color;
                } else if (elem.type === 'line' || elem.type === 'dot') {
                    elem.el.style.background = color;
                }
                elem.color = color;
            });
            
            const gridOverlay = document.querySelector('.grid-overlay');
            if (gridOverlay) gridOverlay.style.color = color;
        }

        function animate() {
            rotation += 0.3;

            elements.forEach((elem) => {
                if (elem.type === 'ring') {
                    const scale = 1 + Math.sin(rotation * 0.02 + elem.index * 0.3) * 0.15;
                    elem.el.style.opacity = 0.05 + Math.abs(Math.sin(rotation * 0.015 + elem.index * 0.2)) * 0.15;
                    elem.el.style.transform = `translate(-50%, -50%) scale(${scale})`;
                }
                
                if (elem.type === 'square') {
                    const angle = rotation * (1 + elem.index * 0.1);
                    const scale = 1 + Math.sin(rotation * 0.025 + elem.index * 0.4) * 0.1;
                    elem.el.style.transform = `translate(-50%, -50%) rotate(${angle}deg) scale(${scale})`;
                    elem.el.style.opacity = 0.05 + Math.abs(Math.cos(rotation * 0.02 + elem.index * 0.3)) * 0.1;
                }
                
                if (elem.type === 'hex') {
                    const radius = 200 + elem.index * 15;
                    const angle = (elem.angle + rotation * 0.5) * Math.PI / 180;
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius;
                    const rot = rotation * 2;
                    elem.el.style.transform = `translate(${x}px, ${y}px) rotate(${rot}deg)`;
                    elem.el.style.opacity = 0.05 + Math.abs(Math.sin(rotation * 0.03 + elem.index * 0.2)) * 0.15;
                }
                
                if (elem.type === 'line') {
                    const angle = elem.angle + rotation * 0.8;
                    elem.el.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;
                    elem.el.style.opacity = 0.08 + Math.abs(Math.sin(rotation * 0.025 + elem.angle * 0.05)) * 0.12;
                }
                
                if (elem.type === 'dot') {
                    const pulse = Math.sin(rotation * 0.04 + elem.x * 0.2 + elem.y * 0.2);
                    elem.el.style.opacity = 0.1 + Math.abs(pulse) * 0.3;
                    elem.el.style.transform = `scale(${1 + pulse * 0.5})`;
                }
            });

            animationFrame = requestAnimationFrame(animate);
        }

        function playImmersiveFrequency(frequency) {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            
            // Main fundamental frequency
            const osc1 = audioContext.createOscillator();
            const gain1 = audioContext.createGain();
            osc1.type = 'sine';
            osc1.frequency.setValueAtTime(frequency, audioContext.currentTime);
            gain1.gain.setValueAtTime(0, audioContext.currentTime);
            gain1.gain.exponentialRampToValueAtTime(0.06, audioContext.currentTime + 2);
            
            // Perfect fifth (1.5x)
            const osc2 = audioContext.createOscillator();
            const gain2 = audioContext.createGain();
            osc2.type = 'sine';
            osc2.frequency.setValueAtTime(frequency * 1.5, audioContext.currentTime);
            gain2.gain.setValueAtTime(0, audioContext.currentTime);
            gain2.gain.exponentialRampToValueAtTime(0.03, audioContext.currentTime + 2.5);
            
            // Octave above (2x)
            const osc3 = audioContext.createOscillator();
            const gain3 = audioContext.createGain();
            osc3.type = 'sine';
            osc3.frequency.setValueAtTime(frequency * 2, audioContext.currentTime);
            gain3.gain.setValueAtTime(0, audioContext.currentTime);
            gain3.gain.exponentialRampToValueAtTime(0.02, audioContext.currentTime + 3);
            
            // Sub-octave (0.5x) for depth
            const osc4 = audioContext.createOscillator();
            const gain4 = audioContext.createGain();
            osc4.type = 'sine';
            osc4.frequency.setValueAtTime(frequency * 0.5, audioContext.currentTime);
            gain4.gain.setValueAtTime(0, audioContext.currentTime);
            gain4.gain.exponentialRampToValueAtTime(0.04, audioContext.currentTime + 2);
            
            // Reverb-like effect with delay
            const delay = audioContext.createDelay();
            delay.delayTime.setValueAtTime(0.3, audioContext.currentTime);
            const delayGain = audioContext.createGain();
            delayGain.gain.setValueAtTime(0.2, audioContext.currentTime);
            
            // Warm lowpass filter
            const filter = audioContext.createBiquadFilter();
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(3000, audioContext.currentTime);
            filter.Q.setValueAtTime(1, audioContext.currentTime);
            
            // Connect everything
            osc1.connect(gain1);
            osc2.connect(gain2);
            osc3.connect(gain3);
            osc4.connect(gain4);
            
            gain1.connect(filter);
            gain2.connect(filter);
            gain3.connect(filter);
            gain4.connect(filter);
            
            filter.connect(delay);
            delay.connect(delayGain);
            delayGain.connect(delay);
            
            filter.connect(audioContext.destination);
            delayGain.connect(audioContext.destination);
            
            osc1.start();
            osc2.start();
            osc3.start();
            osc4.start();
            
            oscillators.push(osc1, osc2, osc3, osc4);
            gainNodes.push(gain1, gain2, gain3, gain4);
        }
    </script>
</body>
</html>
