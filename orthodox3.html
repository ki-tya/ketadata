<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>KETA_MONO // ICON DIGNITAS</title>
<style>
:root{
  --bg:#000;
  --ink:rgba(255,255,255,.86);
  --muted:rgba(255,255,255,.52);
  --line:rgba(255,255,255,.14);
  --line2:rgba(255,255,255,.26);

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
  --sans: Arial, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;

  --top:44px;
  --bot:34px;
  --pad:10px;

  /* intensifiers (0..1) */
  --I_INK: .84;     /* line authority */
  --I_WASH: .26;    /* underpainting wash */
  --I_RAYS: .18;    /* rayburst */
  --I_CRACK: .20;   /* craquelure */
  --I_GRAIN: .16;   /* grain */
  --I_VIGN: .58;    /* vignette */
  --I_HALO: .22;    /* halos */
  --I_SCROLL: .24;  /* scroll panels */
  --I_FILIG: .28;   /* filigree */
  --I_BORDER: .40;  /* border ornament */
  --I_SCRIBE: .26;  /* “script” noise */

  --motion: 1;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{background:var(--bg); color:var(--ink); font-family:var(--sans); overflow:hidden}
button,input{font:inherit}
a{color:inherit}

#root{position:fixed; inset:0; user-select:none}
#root.invert{filter:invert(1) hue-rotate(180deg)}
#root.null .bar, #root.null #botbar, #root.null #sig{display:none}
#root.null #stage{inset:0}

.bar{
  position:fixed; left:0; right:0; top:0;
  height:var(--top);
  display:flex; align-items:center;
  padding:0 var(--pad);
  background:rgba(0,0,0,.72);
  border-bottom:1px solid var(--line);
  z-index:40;
}
#botbar{
  position:fixed; left:0; right:0; bottom:0;
  height:var(--bot);
  display:flex; align-items:center;
  padding:0 var(--pad);
  background:rgba(0,0,0,.72);
  border-top:1px solid var(--line);
  z-index:40;
}
.left,.mid,.right{display:flex; align-items:center; gap:10px}
.left{min-width:440px}
.mid{flex:1; justify-content:center; overflow:hidden}
.right{min-width:440px; justify-content:flex-end}

.pip{width:10px; height:10px; border:1px solid var(--line2); background:rgba(255,255,255,.04)}
.brand{display:flex; flex-direction:column; line-height:1.05}
.brand div{font-family:var(--mono); font-size:11px; letter-spacing:.10em}
.brand .sub{opacity:.55}
.sep{width:1px; height:18px; background:var(--line)}

.btn{
  border:1px solid var(--line2);
  background:rgba(255,255,255,.04);
  color:var(--ink);
  font-family:var(--mono);
  font-size:11px;
  letter-spacing:.10em;
  padding:6px 8px;
  cursor:pointer;
}
.btn:active{transform:translateY(1px)}
.btn.tog.on{border-color:rgba(255,255,255,.46); box-shadow:0 0 0 1px rgba(255,255,255,.10) inset}
.kv{display:flex; align-items:center; gap:8px; font-family:var(--mono); font-size:11px; letter-spacing:.10em}
.kv .k{opacity:.55}
.kv .v{opacity:.92}

#stage{
  position:fixed;
  inset: var(--top) 0 var(--bot) 0;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* centered plate */
#plate{
  position:relative;
  width:min(88vmin, 1040px);
  height:min(88vmin, 1040px);
  border:1px solid var(--line);
  background:rgba(0,0,0,.32);
  padding:14px;
  display:grid;
  grid-template-rows: 1fr auto;
  gap:14px;
}
#icon{
  position:relative;
  border:1px solid var(--line);
  background:#000;
  overflow:hidden;
}
#icon svg{position:absolute; inset:0; width:100%; height:100%}

#dock{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  border:1px solid var(--line);
  background:rgba(255,255,255,.03);
  padding:10px;
  flex-wrap:wrap;
}

.row{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  font-family:var(--mono);
  font-size:11px;
  letter-spacing:.10em;
  min-width: 240px;
}
.row span{opacity:.62}
.row input[type="range"]{width:160px}

#sig{
  position:fixed;
  left:10px;
  bottom: calc(var(--bot) + 10px);
  font-family:var(--mono);
  font-size:11px;
  letter-spacing:.10em;
  opacity:.58;
  z-index:60;
  pointer-events:none;
}

/* motion */
@keyframes shimmer{0%,100%{filter:brightness(1) contrast(1)} 50%{filter:brightness(1.06) contrast(1.08)}}
@keyframes drift{0%,100%{transform:translate3d(0,0,0)} 50%{transform:translate3d(0,-5px,0)}}
#root.motion #icon svg{animation:shimmer 9s ease-in-out infinite}
#root.motion #plate{animation:drift 16s ease-in-out infinite}
</style>
</head>
<body>
<div id="root">
  <div class="bar">
    <div class="left">
      <div class="pip"></div>
      <div class="brand">
        <div>KETA_MONO // ICON DIGNITAS</div>
        <div class="sub">MONOCHROME · ORNATE · CENTERED · LOCAL</div>
      </div>
      <div class="sep"></div>
      <button class="btn tog" id="invertBtn" title="Shift+I">INVERT</button>
      <button class="btn tog" id="nullBtn" title="Shift+N">NULL</button>
      <button class="btn tog on" id="motionBtn">MOTION</button>
    </div>

    <div class="mid">
      <div class="kv"><span class="k">INK</span><span class="v" id="inkLab">84</span></div>
      <div class="sep"></div>
      <div class="kv"><span class="k">BORDER</span><span class="v" id="bLab">40</span></div>
      <div class="sep"></div>
      <div class="kv"><span class="k">FILIG</span><span class="v" id="fLab">28</span></div>
      <div class="sep"></div>
      <div class="kv"><span class="k">VIGN</span><span class="v" id="vLab">58</span></div>
    </div>

    <div class="right">
      <button class="btn" id="reinkBtn">RE-INK</button>
      <button class="btn" id="saveBtn">SAVE</button>
      <button class="btn" id="exportBtn">EXPORT TXT</button>
    </div>
  </div>

  <div id="stage">
    <div id="plate">
      <div id="icon" aria-label="Ornate monochrome icon plate">
        <svg viewBox="0 0 1000 1000" role="img" aria-label="Keta mono icon dignitas">
          <defs>
            <!-- underpainting wash -->
            <radialGradient id="wash" cx="50%" cy="45%" r="78%">
              <stop offset="0" stop-color="rgba(255,255,255,.10)"/>
              <stop offset="0.55" stop-color="rgba(255,255,255,.05)"/>
              <stop offset="1" stop-color="rgba(0,0,0,0)"/>
            </radialGradient>

            <!-- halo -->
            <radialGradient id="halo" cx="50%" cy="50%" r="60%">
              <stop offset="0" stop-color="rgba(255,255,255,.14)"/>
              <stop offset="0.62" stop-color="rgba(255,255,255,.06)"/>
              <stop offset="1" stop-color="rgba(255,255,255,0)"/>
            </radialGradient>

            <!-- micro-grain -->
            <pattern id="grain" width="6" height="6" patternUnits="userSpaceOnUse">
              <circle cx="1" cy="1" r="1" fill="rgba(255,255,255,.06)"/>
              <circle cx="5" cy="2" r="1" fill="rgba(255,255,255,.04)"/>
              <circle cx="3" cy="5" r="1" fill="rgba(255,255,255,.03)"/>
            </pattern>

            <!-- craquelure -->
            <pattern id="crackle" width="64" height="64" patternUnits="userSpaceOnUse">
              <path d="M3 10 L60 4" stroke="rgba(0,0,0,.34)" stroke-width="2"/>
              <path d="M14 62 L62 14" stroke="rgba(0,0,0,.30)" stroke-width="2"/>
              <path d="M2 36 L36 62" stroke="rgba(0,0,0,.24)" stroke-width="2"/>
              <path d="M22 6 L62 44" stroke="rgba(0,0,0,.22)" stroke-width="2"/>
              <path d="M10 22 L46 60" stroke="rgba(0,0,0,.18)" stroke-width="2"/>
              <path d="M6 56 L56 26" stroke="rgba(0,0,0,.18)" stroke-width="2"/>
              <path d="M30 2 L62 30" stroke="rgba(0,0,0,.16)" stroke-width="2"/>
            </pattern>

            <!-- “scribe” microtext pattern -->
            <pattern id="scribe" width="120" height="56" patternUnits="userSpaceOnUse">
              <path d="M6 18 H114" stroke="rgba(0,0,0,.20)" stroke-width="2"/>
              <path d="M10 30 H110" stroke="rgba(0,0,0,.16)" stroke-width="2"/>
              <path d="M18 42 H104" stroke="rgba(0,0,0,.12)" stroke-width="2"/>
              <!-- tiny marks -->
              <path d="M20 16 l6 6 m10-6 l6 6 m10-6 l6 6 m10-6 l6 6" stroke="rgba(0,0,0,.16)" stroke-width="2" fill="none"/>
              <path d="M26 28 l6 6 m10-6 l6 6 m10-6 l6 6" stroke="rgba(0,0,0,.12)" stroke-width="2" fill="none"/>
            </pattern>

            <!-- filigree tile -->
            <pattern id="filig" width="120" height="120" patternUnits="userSpaceOnUse">
              <path d="M60 8
                       C40 8 34 26 44 38
                       C52 48 68 48 76 38
                       C86 26 80 8 60 8 Z"
                    fill="rgba(255,255,255,.06)" stroke="rgba(0,0,0,.28)" stroke-width="2"/>
              <path d="M60 112
                       C40 112 34 94 44 82
                       C52 72 68 72 76 82
                       C86 94 80 112 60 112 Z"
                    fill="rgba(255,255,255,.06)" stroke="rgba(0,0,0,.28)" stroke-width="2"/>
              <path d="M8 60
                       C8 40 26 34 38 44
                       C48 52 48 68 38 76
                       C26 86 8 80 8 60 Z"
                    fill="rgba(255,255,255,.06)" stroke="rgba(0,0,0,.28)" stroke-width="2"/>
              <path d="M112 60
                       C112 40 94 34 82 44
                       C72 52 72 68 82 76
                       C94 86 112 80 112 60 Z"
                    fill="rgba(255,255,255,.06)" stroke="rgba(0,0,0,.28)" stroke-width="2"/>
              <circle cx="60" cy="60" r="16" fill="rgba(0,0,0,.16)" stroke="rgba(255,255,255,.14)" stroke-width="2"/>
              <path d="M60 30 V90" stroke="rgba(0,0,0,.22)" stroke-width="2"/>
              <path d="M30 60 H90" stroke="rgba(0,0,0,.22)" stroke-width="2"/>
            </pattern>

            <!-- vignette mask -->
            <mask id="vignMask">
              <rect width="1000" height="1000" fill="white"/>
              <radialGradient id="vignGrad" cx="50%" cy="50%" r="62%">
                <stop offset="0.60" stop-color="white"/>
                <stop offset="0.82" stop-color="rgba(255,255,255,.35)"/>
                <stop offset="1" stop-color="rgba(255,255,255,0)"/>
              </radialGradient>
              <rect width="1000" height="1000" fill="url(#vignGrad)"/>
            </mask>

            <filter id="soft" x="-20%" y="-20%" width="140%" height="140%">
              <feGaussianBlur stdDeviation="1.6" result="b"/>
              <feMerge>
                <feMergeNode in="b"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>

            <style>
              .frameA{ fill: rgba(255,255,255,.04); stroke: rgba(255,255,255,.14); stroke-width:2; }
              .frameB{ fill: rgba(0,0,0,.18); stroke: rgba(0,0,0,.44); stroke-width:10; }
              .ink{ fill: rgba(255,255,255,.10); stroke: rgba(255,255,255,.22); stroke-width:2; }
              .ink2{ fill: rgba(0,0,0,.22); stroke: rgba(255,255,255,.14); stroke-width:2; }
              .line{ stroke: rgba(255,255,255,.22); stroke-width:2; fill:none; }
              .line2{ stroke: rgba(0,0,0,.34); stroke-width:3; fill:none; }
              .txt{
                font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
                font-size: 18px; letter-spacing: 7px; fill: rgba(0,0,0,.50);
              }
              .txt2{
                font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
                font-size: 16px; letter-spacing: 7px; fill: rgba(0,0,0,.40);
              }
            </style>
          </defs>

          <!-- ground -->
          <rect width="1000" height="1000" fill="rgb(12,12,12)"/>
          <rect width="1000" height="1000" fill="url(#wash)" id="washRect" opacity="0.26"/>

          <!-- filigree field (very faint, under) -->
          <rect x="66" y="66" width="868" height="868" fill="url(#filig)" id="filigRect" opacity="0.28"/>

          <!-- rayburst -->
          <g id="rays" transform="translate(500 430)" opacity="0.18"></g>

          <!-- heavy outer frame + inner frame -->
          <rect x="30" y="30" width="940" height="940" class="frameB"/>
          <rect x="66" y="66" width="868" height="868" class="frameA"/>

          <!-- ornamental border band (intricate) -->
          <g id="borderOrn" opacity="0.40">
            <rect x="86" y="86" width="828" height="828" fill="none" stroke="rgba(0,0,0,.44)" stroke-width="8"/>
            <rect x="102" y="102" width="796" height="796" fill="none" stroke="rgba(255,255,255,.10)" stroke-width="2"/>
            <!-- repeating corner knots -->
            <g opacity="0.9">
              <path d="M122 122 h70 v14 h-56 v56 h-14 Z" fill="rgba(0,0,0,.34)"/>
              <path d="M878 122 h-70 v14 h56 v56 h14 Z" fill="rgba(0,0,0,.34)"/>
              <path d="M122 878 h70 v-14 h-56 v-56 h-14 Z" fill="rgba(0,0,0,.34)"/>
              <path d="M878 878 h-70 v-14 h56 v-56 h14 Z" fill="rgba(0,0,0,.34)"/>
            </g>
            <!-- scalloped side rhythm -->
            <g opacity="0.65">
              <path d="M180 110 Q200 140 220 110 T260 110 T300 110 T340 110 T380 110 T420 110 T460 110 T500 110 T540 110 T580 110 T620 110 T660 110 T700 110 T740 110 T780 110"
                    stroke="rgba(0,0,0,.28)" stroke-width="4" fill="none"/>
              <path d="M110 180 Q140 200 110 220 T110 260 T110 300 T110 340 T110 380 T110 420 T110 460 T110 500 T110 540 T110 580 T110 620 T110 660 T110 700 T110 740 T110 780"
                    stroke="rgba(0,0,0,.28)" stroke-width="4" fill="none"/>
              <path d="M820 890 Q800 860 780 890 T740 890 T700 890 T660 890 T620 890 T580 890 T540 890 T500 890 T460 890 T420 890 T380 890 T340 890 T300 890 T260 890 T220 890"
                    stroke="rgba(0,0,0,.28)" stroke-width="4" fill="none"/>
              <path d="M890 820 Q860 800 890 780 T890 740 T890 700 T890 660 T890 620 T890 580 T890 540 T890 500 T890 460 T890 420 T890 380 T890 340 T890 300 T890 260 T890 220"
                    stroke="rgba(0,0,0,.28)" stroke-width="4" fill="none"/>
            </g>
          </g>

          <!-- scroll panels (scribe texture + pseudo-inscriptions) -->
          <g id="scrolls" opacity="0.88">
            <g>
              <path d="M86 102 H402 Q424 102 424 124 V216 Q424 238 402 238 H86 Z"
                    fill="rgba(0,0,0,.10)" stroke="rgba(0,0,0,.46)" stroke-width="6"/>
              <rect x="106" y="126" width="298" height="86" fill="url(#scribe)" opacity="0.42"/>
              <text x="120" y="162" class="txt">KETA</text>
              <text x="120" y="188" class="txt2">MONO</text>
              <path d="M246 140 H394" stroke="rgba(0,0,0,.34)" stroke-width="3" opacity="0.70"/>
              <path d="M232 154 H380" stroke="rgba(0,0,0,.24)" stroke-width="3" opacity="0.65"/>
              <path d="M262 168 H404" stroke="rgba(0,0,0,.18)" stroke-width="3" opacity="0.55"/>
            </g>

            <g>
              <path d="M598 102 H914 V238 H598 Q576 238 576 216 V124 Q576 102 598 102 Z"
                    fill="rgba(0,0,0,.10)" stroke="rgba(0,0,0,.46)" stroke-width="6"/>
              <rect x="596" y="126" width="298" height="86" fill="url(#scribe)" opacity="0.42"/>
              <text x="616" y="162" class="txt">DATA</text>
              <text x="616" y="188" class="txt2">FIELD</text>
              <path d="M720 140 H888" stroke="rgba(0,0,0,.34)" stroke-width="3" opacity="0.70"/>
              <path d="M706 154 H874" stroke="rgba(0,0,0,.24)" stroke-width="3" opacity="0.65"/>
              <path d="M736 168 H904" stroke="rgba(0,0,0,.18)" stroke-width="3" opacity="0.55"/>
            </g>
          </g>

          <!-- central halos and cross geometry -->
          <g id="halos" filter="url(#soft)" opacity="0.92">
            <circle cx="448" cy="444" r="230" fill="url(#halo)"/>
            <circle cx="612" cy="540" r="166" fill="url(#halo)"/>
            <circle cx="448" cy="444" r="174" class="line" opacity="0.32"/>
            <circle cx="612" cy="540" r="126" class="line" opacity="0.28"/>
            <path d="M448 272 V622" class="line" opacity="0.28"/>
            <path d="M278 444 H618" class="line" opacity="0.28"/>
          </g>

          <!-- figure: more layered + more pleats + carved face -->
          <g id="figure">
            <!-- outer cloak -->
            <path d="M142 910
                     Q112 726 184 594
                     Q262 454 356 424
                     Q392 356 432 300
                     Q474 242 560 252
                     Q658 262 722 350
                     Q788 440 814 566
                     Q844 716 828 836
                     Q820 892 792 910 Z" class="ink2"/>

            <!-- cloak pleats + carved edge -->
            <g opacity="0.30">
              <path d="M206 902 Q196 764 244 646 Q290 534 356 470" class="line"/>
              <path d="M254 910 Q250 770 308 630 Q372 486 412 446" class="line"/>
              <path d="M308 910 Q320 760 382 612 Q444 468 474 430" class="line"/>
              <path d="M642 904 Q712 754 724 604 Q734 478 706 392" class="line"/>
              <path d="M704 890 Q770 740 772 590 Q774 472 744 404" class="line"/>
              <path d="M480 900 Q506 744 546 644 Q592 528 618 488" class="line" opacity="0.22"/>
              <path d="M550 906 Q592 760 620 672 Q654 564 674 524" class="line" opacity="0.18"/>
              <path d="M170 860 Q220 848 278 868" class="line" opacity="0.20"/>
              <path d="M782 860 Q732 848 674 868" class="line" opacity="0.20"/>
            </g>

            <!-- inner garment -->
            <path d="M224 910
                     Q206 772 252 656
                     Q306 520 400 494
                     Q460 476 508 412
                     Q556 348 628 358
                     Q712 370 746 468
                     Q788 586 770 706
                     Q746 842 692 910 Z" class="ink"/>

            <!-- inner pleats -->
            <g opacity="0.22">
              <path d="M298 900 Q296 760 352 630 Q408 500 452 478" class="line"/>
              <path d="M350 908 Q372 746 430 610 Q490 470 520 436" class="line"/>
              <path d="M632 906 Q694 744 700 612 Q706 500 684 444" class="line"/>
              <path d="M580 910 Q642 760 650 648 Q656 548 638 500" class="line" opacity="0.18"/>
            </g>

            <!-- head 1 (layered: skull + faceplate) -->
            <ellipse cx="448" cy="444" rx="112" ry="140" class="ink"/>
            <ellipse cx="448" cy="444" rx="86" ry="112" fill="rgba(0,0,0,.22)" stroke="rgba(255,255,255,.14)" stroke-width="2"/>
            <path d="M360 444 Q448 400 536 444" class="line" opacity="0.14"/>
            <path d="M382 520 Q448 552 514 520" class="line" opacity="0.14"/>

            <!-- head 2 -->
            <ellipse cx="612" cy="540" rx="84" ry="108" class="ink"/>
            <ellipse cx="612" cy="540" rx="62" ry="82" fill="rgba(0,0,0,.22)" stroke="rgba(255,255,255,.14)" stroke-width="2"/>

            <!-- faces (more “carved”) -->
            <g opacity="0.92">
              <ellipse cx="414" cy="444" rx="14" ry="10" fill="rgba(255,255,255,.62)"/>
              <ellipse cx="482" cy="444" rx="14" ry="10" fill="rgba(255,255,255,.62)"/>
              <circle cx="414" cy="445" r="5.6" fill="rgba(0,0,0,.90)"/>
              <circle cx="482" cy="445" r="5.6" fill="rgba(0,0,0,.90)"/>
              <path d="M448 456 L436 496 L460 496" class="line"/>
              <path d="M418 526 Q448 546 478 526" class="line"/>
              <path d="M396 436 Q414 422 432 436" class="line" opacity="0.26"/>
              <path d="M464 436 Q482 422 500 436" class="line" opacity="0.26"/>

              <ellipse cx="588" cy="540" rx="11" ry="8" fill="rgba(255,255,255,.58)"/>
              <ellipse cx="636" cy="540" rx="11" ry="8" fill="rgba(255,255,255,.58)"/>
              <circle cx="588" cy="541" r="4.9" fill="rgba(0,0,0,.90)"/>
              <circle cx="636" cy="541" r="4.9" fill="rgba(0,0,0,.90)"/>
              <path d="M612 552 L604 582 L620 582" class="line"/>
              <path d="M592 602 Q612 616 632 602" class="line"/>
              <path d="M576 532 Q588 522 600 532" class="line" opacity="0.22"/>
              <path d="M624 532 Q636 522 648 532" class="line" opacity="0.22"/>
            </g>

            <!-- embrace / hands (layered + finger bands) -->
            <path d="M322 662
                     Q406 604 492 624
                     Q574 642 664 708
                     Q688 726 686 752
                     Q684 782 652 788
                     Q556 808 482 782
                     Q398 752 306 706 Z"
                  fill="rgba(0,0,0,.18)" stroke="rgba(255,255,255,.16)" stroke-width="2"/>

            <g opacity="0.22">
              <path d="M350 712 Q430 668 504 690" class="line"/>
              <path d="M382 744 Q456 710 534 732" class="line"/>
              <path d="M460 786 Q538 760 624 776" class="line"/>
              <path d="M536 654 Q590 676 640 714" class="line" opacity="0.18"/>
            </g>

            <!-- central “seal knot” -->
            <g id="knot" opacity="0.55">
              <circle cx="500" cy="822" r="34" fill="rgba(0,0,0,.18)" stroke="rgba(255,255,255,.12)" stroke-width="2"/>
              <path d="M500 796 V848" class="line" opacity="0.22"/>
              <path d="M474 822 H526" class="line" opacity="0.22"/>
              <circle cx="500" cy="822" r="14" fill="rgba(255,255,255,.06)" stroke="rgba(0,0,0,.26)" stroke-width="2"/>
            </g>
          </g>

          <!-- bottom inscription band -->
          <g id="seal" opacity="0.90">
            <path d="M120 820 H880 V930 H120 Z" fill="rgba(0,0,0,.12)" stroke="rgba(0,0,0,.48)" stroke-width="7"/>
            <path d="M140 858 H860" stroke="rgba(0,0,0,.42)" stroke-width="3"/>
            <rect x="160" y="870" width="680" height="44" fill="url(#scribe)" opacity="0.34"/>
            <text x="500" y="902" text-anchor="middle"
              font-family="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono','Courier New', monospace"
              font-size="22" letter-spacing="7" fill="rgba(0,0,0,.50)">KETA // MONO // DIGNITAS</text>
          </g>

          <!-- overlays -->
          <rect x="66" y="66" width="868" height="868" fill="url(#grain)" id="grainRect" opacity="0.16"/>
          <rect x="66" y="66" width="868" height="868" fill="url(#crackle)" id="crackRect" opacity="0.20"/>
          <rect x="66" y="66" width="868" height="868" fill="url(#scribe)" id="scribeRect" opacity="0.26"/>

          <rect width="1000" height="1000" fill="rgba(0,0,0,.90)" mask="url(#vignMask)" id="vignRect" opacity="0.58"/>
        </svg>
      </div>

      <div id="dock">
        <div class="row"><span>INK</span><input id="inkR" type="range" min="0" max="100" value="84"></div>
        <div class="row"><span>WASH</span><input id="washR" type="range" min="0" max="100" value="26"></div>
        <div class="row"><span>HALO</span><input id="haloR" type="range" min="0" max="100" value="22"></div>
        <div class="row"><span>RAYS</span><input id="raysR" type="range" min="0" max="100" value="18"></div>

        <div class="row"><span>BORDER</span><input id="borderR" type="range" min="0" max="100" value="40"></div>
        <div class="row"><span>FILIG</span><input id="filigR" type="range" min="0" max="100" value="28"></div>
        <div class="row"><span>SCRIBE</span><input id="scribeR" type="range" min="0" max="100" value="26"></div>

        <div class="row"><span>CRACK</span><input id="crackR" type="range" min="0" max="100" value="20"></div>
        <div class="row"><span>GRAIN</span><input id="grainR" type="range" min="0" max="100" value="16"></div>
        <div class="row"><span>VIGN</span><input id="vignR" type="range" min="0" max="100" value="58"></div>
        <div class="row"><span>SCROLL</span><input id="scrollR" type="range" min="0" max="100" value="24"></div>
      </div>
    </div>
  </div>

  <div id="botbar">
    <div class="left">
      <div class="kv"><span class="k">FILE</span><span class="v" id="fileId"></span></div>
      <div class="sep"></div>
      <div class="kv"><span class="k">UPDATED</span><span class="v" id="updatedAt"></span></div>
    </div>
    <div class="mid">
      <div class="kv"><span class="k">LIGHT</span><span class="v" id="lightLab">1</span></div>
      <div class="sep"></div>
      <div class="kv"><span class="k">MODE</span><span class="v">ICON</span></div>
    </div>
    <div class="right">
      <button class="btn" id="lDown">L-</button>
      <button class="btn" id="lUp">L+</button>
      <div class="sep"></div>
      <button class="btn" id="resetBtn">RESET</button>
    </div>
  </div>

  <div id="sig"></div>
</div>

<script>
const $ = (id)=>document.getElementById(id);
const clamp01 = (n)=>Math.max(0, Math.min(1, n));

const FILE_ID = (() => {
  const k="KETA_MONO_ICON_DIGNITAS_FILE_ID_v1";
  let v=localStorage.getItem(k);
  if(!v){
    v="KETA-ICON-"+Math.random().toString(16).slice(2,10).toUpperCase();
    localStorage.setItem(k,v);
  }
  return v;
})();
const LS_KEY = "KETA_MONO_ICON_DIGNITAS_STATE_v1::"+FILE_ID;

const DEFAULT = {
  ui:{ invert:false, null:false, fullscreen:false, motion:true, light:1 },
  intens:{ ink:.84, wash:.26, rays:.18, crack:.20, grain:.16, vign:.58, halo:.22, scroll:.24, filig:.28, border:.40, scribe:.26 },
  meta:{ createdAt:new Date().toISOString(), updatedAt:new Date().toISOString(), version:"v1" }
};

let STATE = load();

function load(){
  try{
    const raw=localStorage.getItem(LS_KEY);
    if(!raw) return structuredClone(DEFAULT);
    const p=JSON.parse(raw);
    return deepFill(structuredClone(DEFAULT), p);
  }catch(e){ return structuredClone(DEFAULT); }
}
function deepFill(base, inc){
  if(!inc || typeof inc!=="object") return base;
  for(const k of Object.keys(inc)){
    if(!(k in base)){ base[k]=inc[k]; continue; }
    if(base[k] && typeof base[k]==="object" && !Array.isArray(base[k]) &&
       inc[k] && typeof inc[k]==="object" && !Array.isArray(inc[k])){
      base[k]=deepFill(base[k], inc[k]);
    }else base[k]=inc[k];
  }
  return base;
}
function isoShort(s){
  try{
    const d=new Date(s);
    const y=d.getFullYear();
    const m=String(d.getMonth()+1).padStart(2,"0");
    const da=String(d.getDate()).padStart(2,"0");
    const hh=String(d.getHours()).padStart(2,"0");
    const mm=String(d.getMinutes()).padStart(2,"0");
    return `${y}-${m}-${da} ${hh}:${mm}`;
  }catch(e){ return String(s||""); }
}
function sigLine(){
  const updated = isoShort(STATE.meta.updatedAt);
  return `AE/EE/WB · FILE_ID=${FILE_ID} · ROOM_ID=KETA_MONO_ICON_DIGNITAS · VERSION=${STATE.meta.version} · UPDATED_AT=${updated} · CHANGELOG=ornate mono dignitas`;
}

function save(reason="save"){
  STATE.meta.updatedAt=new Date().toISOString();
  localStorage.setItem(LS_KEY, JSON.stringify(STATE));
  render();
}

function apply(){
  const svg = document.querySelector("#icon svg");
  const ink = clamp01(STATE.intens.ink);
  svg.style.filter = `contrast(${(1 + 0.70*ink).toFixed(3)}) brightness(${(0.90 + 0.18*ink).toFixed(3)})`;

  $("washRect").setAttribute("opacity", String(clamp01(STATE.intens.wash)));
  $("grainRect").setAttribute("opacity", String(0.02 + 0.78*STATE.intens.grain));
  $("crackRect").setAttribute("opacity", String(0.02 + 0.78*STATE.intens.crack));
  $("vignRect").setAttribute("opacity",  String(0.08 + 0.92*STATE.intens.vign));

  $("halos").setAttribute("opacity", String(0.10 + 0.90*STATE.intens.halo));
  $("rays").setAttribute("opacity",  String(0.00 + 1.00*STATE.intens.rays));

  $("scrolls").setAttribute("opacity", String(0.20 + 0.80*STATE.intens.scroll));
  $("filigRect").setAttribute("opacity", String(0.00 + 0.70*STATE.intens.filig));
  $("borderOrn").setAttribute("opacity", String(0.00 + 0.90*STATE.intens.border));
  $("scribeRect").setAttribute("opacity", String(0.00 + 0.80*STATE.intens.scribe));

  $("inkLab").textContent = String(Math.round(STATE.intens.ink*100));
  $("bLab").textContent   = String(Math.round(STATE.intens.border*100));
  $("fLab").textContent   = String(Math.round(STATE.intens.filig*100));
  $("vLab").textContent   = String(Math.round(STATE.intens.vign*100));
}

function render(){
  const root=$("root");
  root.classList.toggle("invert", !!STATE.ui.invert);
  root.classList.toggle("null", !!STATE.ui.null);
  root.classList.toggle("motion", !!STATE.ui.motion);

  $("invertBtn").classList.toggle("on", !!STATE.ui.invert);
  $("nullBtn").classList.toggle("on", !!STATE.ui.null);
  $("motionBtn").classList.toggle("on", !!STATE.ui.motion);

  $("fileId").textContent = FILE_ID;
  $("updatedAt").textContent = isoShort(STATE.meta.updatedAt);
  $("lightLab").textContent = String(STATE.ui.light||1);
  $("sig").textContent = sigLine();

  // sliders
  $("inkR").value   = String(Math.round(STATE.intens.ink*100));
  $("washR").value  = String(Math.round(STATE.intens.wash*100));
  $("haloR").value  = String(Math.round(STATE.intens.halo*100));
  $("raysR").value  = String(Math.round(STATE.intens.rays*100));
  $("borderR").value= String(Math.round(STATE.intens.border*100));
  $("filigR").value = String(Math.round(STATE.intens.filig*100));
  $("scribeR").value= String(Math.round(STATE.intens.scribe*100));
  $("crackR").value = String(Math.round(STATE.intens.crack*100));
  $("grainR").value = String(Math.round(STATE.intens.grain*100));
  $("vignR").value  = String(Math.round(STATE.intens.vign*100));
  $("scrollR").value= String(Math.round(STATE.intens.scroll*100));

  apply();
}

function reink(){
  const j=(v,a)=>clamp01(v + (Math.random()*2-1)*a);
  STATE.intens.ink   = j(STATE.intens.ink,   0.10);
  STATE.intens.wash  = j(STATE.intens.wash,  0.10);
  STATE.intens.halo  = j(STATE.intens.halo,  0.14);
  STATE.intens.rays  = j(STATE.intens.rays,  0.14);
  STATE.intens.border= j(STATE.intens.border,0.14);
  STATE.intens.filig = j(STATE.intens.filig, 0.16);
  STATE.intens.scribe= j(STATE.intens.scribe,0.16);
  STATE.intens.crack = j(STATE.intens.crack, 0.12);
  STATE.intens.grain = j(STATE.intens.grain, 0.12);
  STATE.intens.vign  = j(STATE.intens.vign,  0.08);
  STATE.intens.scroll= j(STATE.intens.scroll,0.12);
  save("re-ink");
}

function toggleFullscreen(){
  const el=document.documentElement;
  if(!document.fullscreenElement){ el.requestFullscreen?.(); STATE.ui.fullscreen=true; }
  else{ document.exitFullscreen?.(); STATE.ui.fullscreen=false; }
  save("fullscreen");
}

function downloadText(filename, text){
  const blob=new Blob([text],{type:"text/plain;charset=utf-8"});
  const url=URL.createObjectURL(blob);
  const a=document.createElement("a");
  a.href=url; a.download=filename;
  document.body.appendChild(a); a.click(); a.remove();
  setTimeout(()=>URL.revokeObjectURL(url), 500);
}

function buildRays(){
  const g=$("rays");
  while(g.firstChild) g.removeChild(g.firstChild);
  const N=72, inner=210, outer=480;
  for(let i=0;i<N;i++){
    const a=(Math.PI*2)*(i/N)+0.18;
    const x1=Math.cos(a)*inner, y1=Math.sin(a)*inner;
    const x2=Math.cos(a)*outer, y2=Math.sin(a)*outer;
    const ln=document.createElementNS("http://www.w3.org/2000/svg","line");
    ln.setAttribute("x1", x1.toFixed(2));
    ln.setAttribute("y1", y1.toFixed(2));
    ln.setAttribute("x2", x2.toFixed(2));
    ln.setAttribute("y2", y2.toFixed(2));
    ln.setAttribute("stroke", "rgba(0,0,0,.30)");
    ln.setAttribute("stroke-width", (i%3===0? 3:2));
    ln.setAttribute("opacity", (i%9===0? 0.58:0.26));
    g.appendChild(ln);
  }
}

function bind(){
  $("invertBtn").onclick=()=>{ STATE.ui.invert=!STATE.ui.invert; save("invert"); };
  $("nullBtn").onclick=()=>{ STATE.ui.null=!STATE.ui.null; save("null"); };
  $("motionBtn").onclick=()=>{ STATE.ui.motion=!STATE.ui.motion; save("motion"); };
  $("reinkBtn").onclick=()=>reink();
  $("saveBtn").onclick=()=>save("manual");

  $("exportBtn").onclick=()=>{
    const txt =
`KETA_MONO // ICON DIGNITAS EXPORT
FILE_ID: ${FILE_ID}
UPDATED_AT: ${STATE.meta.updatedAt}
STAMP: ${sigLine()}
`;
    downloadText(`KETA_MONO_ICON_DIGNITAS_${FILE_ID}.txt`, txt);
  };

  $("resetBtn").onclick=()=>{
    const keepLight=STATE.ui.light||1;
    const keepMotion=!!STATE.ui.motion;
    STATE=structuredClone(DEFAULT);
    STATE.ui.light=keepLight;
    STATE.ui.motion=keepMotion;
    save("reset");
  };

  const bindR=(id,key)=>{
    $(id).addEventListener("input",(e)=>{
      STATE.intens[key]=clamp01(Number(e.target.value)/100);
      render();
    });
    $(id).addEventListener("change",()=>save("intensity"));
  };
  bindR("inkR","ink");
  bindR("washR","wash");
  bindR("haloR","halo");
  bindR("raysR","rays");
  bindR("borderR","border");
  bindR("filigR","filig");
  bindR("scribeR","scribe");
  bindR("crackR","crack");
  bindR("grainR","grain");
  bindR("vignR","vign");
  bindR("scrollR","scroll");

  $("lDown").onclick=()=>{ STATE.ui.light=Math.max(1,(STATE.ui.light||1)-1); save("light"); };
  $("lUp").onclick=()=>{ STATE.ui.light=Math.min(6,(STATE.ui.light||1)+1); save("light"); };

  window.addEventListener("keydown",(e)=>{
    const tag=(e.target && e.target.tagName||"").toLowerCase();
    const typing=(tag==="textarea"||tag==="input");
    if(e.shiftKey && e.key.toLowerCase()==="i"){ e.preventDefault(); STATE.ui.invert=!STATE.ui.invert; save("invert(hk)"); return; }
    if(e.shiftKey && e.key.toLowerCase()==="n"){ e.preventDefault(); STATE.ui.null=!STATE.ui.null; save("null(hk)"); return; }
    if(e.shiftKey && e.key.toLowerCase()==="f"){ e.preventDefault(); toggleFullscreen(); return; }
    if(e.key>="1" && e.key<="6"){ STATE.ui.light=Number(e.key); save("light(hk)"); return; }
    if(!typing && e.code==="Space"){ e.preventDefault(); STATE.ui.motion=!STATE.ui.motion; save("motion(space)"); return; }
  });
}

/* init */
(function init(){
  buildRays();
  bind();
  render();
})();
</script>

<!--
AE/EE/WB · FILE_ID=KETA_MONO_ICON_DIGNITAS_FILE_ID_v1 · ROOM_ID=KETA_MONO_ICON_DIGNITAS · VERSION=v1 · UPDATED_AT=local · CHANGELOG=ornate mono dignitas
-->
</body>
</html>
