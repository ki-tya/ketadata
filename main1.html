<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KETADATA // DIRECTORY</title>
  <style>
    :root{
      --bg:#0b0b0c;
      --panel:#101114;
      --ink:rgba(255,255,255,.90);
      --muted:rgba(255,255,255,.55);
      --edge:rgba(255,255,255,.12);
      --edge2:rgba(255,255,255,.20);
      --focus:rgba(255,255,255,.28);
      --r:10px;
      --pad:14px;
      --w:1100px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--ink);
      font-family: Arial, Helvetica, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    header{
      position: sticky;
      top: 0;
      z-index: 20;
      background: linear-gradient(180deg, rgba(11,11,12,.96), rgba(11,11,12,.80));
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--edge);
    }

    .wrap{
      max-width: var(--w);
      margin: 0 auto;
      padding: 18px 16px;
    }

    .top{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width: 260px;
    }

    .brand .kicker{
      letter-spacing:.20em;
      text-transform:uppercase;
      font-size:11px;
      color:var(--muted);
    }

    .brand .title{
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:16px;
      font-weight:700;
      line-height:1.1;
    }

    .brand .sub{
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
      max-width: 620px;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .search{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border:1px solid var(--edge);
      background: rgba(255,255,255,.03);
      border-radius: var(--r);
      min-width: min(520px, 92vw);
    }

    .search input{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color:var(--ink);
      font-size:13px;
      letter-spacing:.02em;
    }

    .pill{
      border:1px solid var(--edge);
      background: rgba(255,255,255,.02);
      border-radius: 999px;
      padding: 7px 10px;
      font-size:11px;
      color:var(--muted);
      letter-spacing:.08em;
      text-transform:uppercase;
      user-select:none;
    }

    .btn{
      appearance:none;
      border:1px solid var(--edge);
      background: rgba(255,255,255,.03);
      color:var(--ink);
      padding: 9px 10px;
      border-radius: 999px;
      font-size:11px;
      letter-spacing:.10em;
      text-transform:uppercase;
      cursor:pointer;
    }
    .btn:hover{ border-color: var(--edge2); }
    .btn:active{ transform: translateY(1px); }

    main{
      max-width: var(--w);
      margin: 0 auto;
      padding: 18px 16px 34px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }

    .room{
      grid-column: span 6;
      border:1px solid var(--edge);
      background: rgba(255,255,255,.02);
      border-radius: var(--r);
      overflow:hidden;
    }

    @media (max-width: 980px){
      .room{ grid-column: span 12; }
      .search{ min-width: min(100%, 92vw); }
    }

    .roomHead{
      padding: 12px 14px;
      border-bottom:1px solid var(--edge);
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
    }

    .roomName{
      font-size:12px;
      font-weight:700;
      letter-spacing:.14em;
      text-transform:uppercase;
    }

    .roomMeta{
      font-size:11px;
      color:var(--muted);
      letter-spacing:.06em;
      text-transform:uppercase;
      white-space:nowrap;
    }

    .roomBody{
      padding: 10px 14px 14px;
    }

    ul{
      list-style:none;
      padding:0;
      margin:0;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    a{
      color: var(--ink);
      text-decoration:none;
    }

    .linkRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 9px 10px;
      border:1px solid transparent;
      border-radius: 9px;
      background: rgba(255,255,255,.01);
    }

    .linkRow:hover{
      border-color: var(--edge);
      background: rgba(255,255,255,.03);
    }

    .url{
      font-size:12px;
      letter-spacing:.02em;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: 100%;
    }

    .tag{
      font-size:10px;
      color: var(--muted);
      letter-spacing:.12em;
      text-transform:uppercase;
      border:1px solid var(--edge);
      background: rgba(255,255,255,.02);
      padding: 5px 7px;
      border-radius: 999px;
      flex: 0 0 auto;
    }

    .empty{
      padding: 10px 0 0;
      color: var(--muted);
      font-size:12px;
      line-height:1.35;
    }

    footer{
      max-width: var(--w);
      margin: 0 auto;
      padding: 0 16px 28px;
      color: rgba(255,255,255,.35);
      font-size: 11px;
      letter-spacing:.06em;
      text-transform:uppercase;
    }

    kbd{
      font: inherit;
      border: 1px solid var(--edge);
      background: rgba(255,255,255,.03);
      padding: 2px 6px;
      border-radius: 7px;
      color: rgba(255,255,255,.70);
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="top">
        <div class="brand">
          <div class="kicker">KETADATA</div>
          <div class="title">Directory</div>
          <div class="sub">
            Minimal index of rooms + pages from the latest export. Filter by keyword; click to navigate.
          </div>
        </div>

        <div class="controls">
          <div class="search" role="search">
            <input id="q" type="search" placeholder="Filter: room / filename / keyword (e.g., mandala, slopstream, vault, studio)" autocomplete="off" />
            <span class="pill" id="count">0 links</span>
          </div>
          <button class="btn" id="clearBtn" type="button">Clear</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="grid" id="rooms"></div>
  </main>

  <footer>
    Keyboard: <kbd>/</kbd> focus search Â· <kbd>Esc</kbd> clear
  </footer>

  <script>
    // Normalize URLs: add https:// if missing (e.g., "ketadata.com/x.html")
    function norm(url){
      const u = String(url).trim();
      if(!u) return "";
      if(u.startsWith("http://") || u.startsWith("https://")) return u;
      return "https://" + u.replace(/^\/+/, "");
    }

    // Data compiled from your export (rooms + room notes links)
    const DATA = [
      {
        room: "ENTRY POINT",
        links: [
          "https://ketadata.com/index.html",
          "https://ketadata.com/page2.html"
        ]
      },
      {
        room: "LOBBY",
        links: [
          "ketadata.com/blacklotus.html"
        ]
      },
      {
        room: "ELEVATOR",
        links: [
          "https://ketadata.com/elevator1.html"
        ]
      },
      {
        room: "OBSERVATORY",
        links: [
          "https://ketadata.com/map.html",
          "https://ketadata.com/funding.html",
          "https://ketadata.com/slopstream3.html",
          "https://ketadata.com/cctv1.html"
        ]
      },
      {
        room: "KDTV CINEMA",
        links: [
          "ketadata.com/kdtv1.html",
          "https://ketadata.com/videomanager.html",
          "https://ketadata.com/slopstream2.html",
          "https://ketadata.com/darkroom.html"
        ]
      },
      {
        room: "STUDIO",
        links: [
          "ketadata.com/font.html",
          "ketadata.com/tester3.html",
          "https://ketadata.com/prompt.html",
          "https://ketadata.com/ref.html",
          "https://ketadata.com/color1.html",
          "https://ketadata.com/color3.html",
          "https://ketadata.com/color5.html",
          "https://ketadata.com/studio.html",
          "https://ketadata.com/studio1.html",
          "https://ketadata.com/board3.html",
          "https://ketadata.com/darkroom.html",
          "ketadata.com/studiov0.html",
          "ketadata.com/studiov1.html",
          "https://ketadata.com/controller.html",
          "https://ketadata.com/controller1.html",
          "https://ketadata.com/controller2.html",
          "https://ketadata.com/controller3.html"
        ]
      },
      {
        room: "LAB",
        links: [
          "ketadata.com/prompt3.html",
          "ketadata.com/circle.html",
          "ketadata.com/system8.html",
          "ketadata.com/prompt.html",
          "ketadata.com/html.html",
          "ketadata.com/ref.html",
          "ketadata.com/system4.html",
          "ketadata.com/system5.html",
          "ketadata.com/system6.html"
        ]
      },
      {
        room: "BASEMENT",
        links: [
          "https://ketadata.com/room2.html",
          "https://ketadata.com/page2.html",
          "https://ketadata.com/1.html",
          "https://ketadata.com/2.html",
          "https://ketadata.com/3.html",
          "https://ketadata.com/4.html",
          "https://ketadata.com/5.html",
          "https://ketadata.com/6.html",
          "https://ketadata.com/bleak.html",
          "https://ketadata.com/beatball.html",
          "https://ketadata.com/ball.html",
          "https://ketadata.com/capture.html",
          "https://ketadata.com/capturegpt.html",
          "https://ketadata.com/capturegpt2.html",
          "https://ketadata.com/capturegpt3.html",
          "https://ketadata.com/capturegpt4.html",
          "https://ketadata.com/capturegpt5.html",
          "https://ketadata.com/capturegpt6.html",
          "https://ketadata.com/capturegpt7.html",
          "https://ketadata.com/capturegpt8.html",
          "https://ketadata.com/ripple.html",
          "https://ketadata.com/ripple2.html",
          "https://ketadata.com/ripple3.html",
          "https://ketadata.com/ripplegpt.html",
          "https://ketadata.com/newtrap.html",
          "https://ketadata.com/newtrap2.html",
          "https://ketadata.com/newtrap3.html",
          "https://ketadata.com/dmt.html",
          "https://ketadata.com/dmt2.html",
          "https://ketadata.com/dmt3.html",
          "https://ketadata.com/dmt4.html",
          "https://ketadata.com/dmtzoom.html",
          "https://ketadata.com/mdma.html",
          "https://ketadata.com/mdma2.html",
          "https://ketadata.com/mdmagpt.html",
          "https://ketadata.com/mdmagpt2.html",
          "https://ketadata.com/release.html",
          "https://ketadata.com/release2.html",
          "https://ketadata.com/release3.html",
          "https://ketadata.com/release4.html",
          "https://ketadata.com/gptsubject.html",
          "https://ketadata.com/subgpt2.html",
          "https://ketadata.com/subgpt3.html",
          "https://ketadata.com/subgpt4.html",
          "https://ketadata.com/subgpt5.html",
          "https://ketadata.com/slopstream2.html"
        ]
      },
      {
        room: "ROOM",
        links: [
          "https://ketadata.com/room.html",
          "https://ketadata.com/submit.html"
        ]
      },
      {
        room: "LIBRARY",
        links: [
          "https://ketadata.com/library.html",
          "https://ketadata.com/cctv.html",
          "ketadata.com/deleuze.html",
          "ketadata.com/burroughs.html",
          "ketadata.com/borges.html",
          "ketadata.com/mcluhan.html",
          "ketadata.com/debord.html",
          "jketadata.com/ung.html",
          "ketadata.com/artaud.html",
          "ketadata.com/etal.html",
          "ketadata.com/bataille.html",
          "ketadata.com/bataille1.html",
          "https://ketadata.com/coa3.html",
          "https://ketadata.com/coa4.html",
          "https://ketadata.com/coatofarms.html",
          "https://ketadata.com/coatofarms2.html"
        ]
      },
      {
        room: "TEMPLE",
        links: [
          "ketadata.com/sg1.html",
          "ketadata.com/temple.html",
          "ketadata.com/temple1.html",
          "https://ketadata.com/chakra.html",
          "https://ketadata.com/mandala.html",
          "https://ketadata.com/mandala2.html",
          "https://ketadata.com/mandala3.html",
          "https://ketadata.com/mandalagpt.html",
          "https://ketadata.com/mandalagpt2.html",
          "https://ketadata.com/mandalagpt3.html",
          "https://ketadata.com/mandalagpt4.html",
          "https://ketadata.com/gptsubject.html",
          "https://ketadata.com/subgpt2.html",
          "https://ketadata.com/subgpt3.html",
          "https://ketadata.com/subgpt4.html",
          "https://ketadata.com/subgpt5.html",
          "https://ketadata.com/slopstream.html",
          "https://ketadata.com/slopstream2.html",
          "https://ketadata.com/slopstream3.html",
          "https://ketadata.com/misc.html",
          "https://ketadata.com/misc2.html",
          "https://ketadata.com/misc3.html",
          "https://ketadata.com/misc4.html",
          "https://ketadata.com/misc5.html",
          "https://ketadata.com/misc6.html",
          "https://ketadata.com/misc7.html",
          "https://ketadata.com/misc8.html",
          "ketadata.com/aura.html",
          "ketadata.com/aura1.html",
          "ketadata.com/aura2.html",
          "ketadata.com/blacklotus.html"
        ]
      },
      {
        room: "GIFT SHOP",
        links: [
          "https://ketadata.com/funnel4.html",
          "https://ketadata.com/shop.html"
        ]
      },
      {
        room: "VAULT",
        links: [
          "https://ketadata.com/vape-drive.html",
          "https://ketadata.com/nav.html",
          "https://ketadata.com/directory.html",
          "https://ketadata.com/directory2.html",
          "https://ketadata.com/directory3.html",
          "https://ketadata.com/directory4.html",
          "https://ketadata.com/directory5.html",
          "https://ketadata.com/fund.html",
          "ketadata.com/kdtv.html",
          "ketadata.com/constellation.html",
          "ketadata.com/system.html",
          "ketadata.com/system1.html",
          "ketadata.com/system2.html",
          "ketadata.com/system3.html",
          "ketadata.com/prompt1.html",
          "ketadata.com/prompt2.html",
          "https://ketadata.com/video.html",
          "https://ketadata.com/video2.html",
          "https://ketadata.com/color.html",
          "https://ketadata.com/color2.html",
          "https://ketadata.com/color4.html",
          "https://ketadata.com/board.html",
          "https://ketadata.com/board1.html",
          "https://ketadata.com/board2.html",
          "https://ketadata.com/rippleinfra.html",
          "https://ketadata.com/rippleuv.html",
          "https://ketadata.com/ripplefull.html"
        ]
      },
      {
        room: "SYSTEM WIDE FUNCTIONS",
        links: [
          "https://ketadata.com/1.html",
          "https://ketadata.com/2.html",
          "https://ketadata.com/3.html",
          "https://ketadata.com/4.html",
          "https://ketadata.com/5.html",
          "https://ketadata.com/6.html",
          "https://ketadata.com/submit.html"
        ]
      }
    ];

    // Deduplicate within rooms + normalize to absolute URLs
    for (const section of DATA) {
      const seen = new Set();
      section.links = section.links
        .map(norm)
        .filter(Boolean)
        .filter(u => (seen.has(u) ? false : (seen.add(u), true)));
    }

    const roomsEl = document.getElementById("rooms");
    const qEl = document.getElementById("q");
    const countEl = document.getElementById("count");
    const clearBtn = document.getElementById("clearBtn");

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }

    function render(filter=""){
      roomsEl.innerHTML = "";
      const f = filter.trim().toLowerCase();

      let totalVisible = 0;

      for (const section of DATA) {
        const links = section.links.filter(u => {
          if (!f) return true;
          return section.room.toLowerCase().includes(f) || u.toLowerCase().includes(f);
        });

        if (f && links.length === 0) continue;

        totalVisible += links.length;

        const card = document.createElement("section");
        card.className = "room";

        card.innerHTML = `
          <div class="roomHead">
            <div class="roomName">${escapeHtml(section.room)}</div>
            <div class="roomMeta">${links.length} link${links.length === 1 ? "" : "s"}</div>
          </div>
          <div class="roomBody">
            ${links.length ? `
              <ul>
                ${links.map(u => `
                  <li>
                    <a class="linkRow" href="${escapeHtml(u)}">
                      <span class="url">${escapeHtml(u)}</span>
                      <span class="tag">open</span>
                    </a>
                  </li>
                `).join("")}
              </ul>
            ` : `
              <div class="empty">No links in this section.</div>
            `}
          </div>
        `;

        roomsEl.appendChild(card);
      }

      countEl.textContent = `${totalVisible} link${totalVisible === 1 ? "" : "s"}`;
    }

    function clear(){
      qEl.value = "";
      render("");
      qEl.focus();
    }

    qEl.addEventListener("input", () => render(qEl.value));
    clearBtn.addEventListener("click", clear);

    // Keyboard affordances: "/" focuses search; "Esc" clears
    window.addEventListener("keydown", (e) => {
      if (e.key === "/" && document.activeElement !== qEl) {
        e.preventDefault();
        qEl.focus();
      }
      if (e.key === "Escape") {
        clear();
      }
    });

    // Initial render
    render("");
  </script>
</body>
</html>
