<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KETADATA</title>

  <style>
    html, body{
      height:100%;
      margin:0;
      padding:0;
      overflow:hidden;
      background:black;
      color:white;
    }

    body{
      font-family: Arial, sans-serif;
      text-align:center;
      padding-top:32vh; /* moved down */
    }

    h1{
      margin:0;
      font-weight:800;
      letter-spacing:0.02em;
      line-height:0.9;
    }

    /* KETADATA spans horizontal */
    #ketaWord{
      display:inline-flex;
      justify-content:center;
      align-items:baseline;
      width:96vw;
      max-width: 1800px;
      font-size: clamp(8rem, 15vw, 17rem);
      cursor:pointer;
      user-select:none;
      position:relative;
      z-index:10;
    }

    /* fixed-width cells so "/" never shifts neighbors */
    #ketaWord .cell{
      flex: 1 1 0;
      display:flex;
      justify-content:center;
      align-items:baseline;
      min-width:0;
    }
    #ketaWord .ch{
      display:inline-block;
      width:1ch;
      text-align:center;
      line-height:1;
    }

    p{
      color:#5555;
      font-size:1.5rem;
      margin:0;
    }
    .subtitle{
      margin-top: 1.2rem;
      letter-spacing:0.38em;
      text-transform:uppercase;
      user-select:none;
      z-index:10;
      position:relative;
    }

    /* NAV intentionally effectively invisible */
    .nav-links{
      display:flex;
      justify-content:center;
      gap:4vw;
      margin-top:3vh;
      font-size:2.5vh;
      letter-spacing:0.1em;
      z-index:10;
      position:relative;
    }
    .nav-item{
      color:#000000;
      text-decoration:none;
      transition:color 0.2s ease;
    }
    .nav-item:hover{ color:#ff1a1a; }

    /* warning */
    #warning{
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:170px;
      width:min(96vw, 1400px);
      pointer-events:none;
      z-index:10;
    }

    /* ticker intentionally invisible, NO LINE */
    .meow-ticker{
      position:fixed;
      bottom:40px;
      left:0;
      width:100%;
      background:none;
      color:black;
      padding:12px 0;
      overflow:hidden;
      white-space:nowrap;
      font-family: Arial, Helvetica, sans-serif;
      font-size:18px;
      font-weight:600;
      letter-spacing:2px;
      z-index:10;
      pointer-events:none;
      border-top:none !important;
      box-shadow:none !important;
      outline:none !important;
    }
    .meow-content{
      display:inline-block;
      animation:ticker 40s linear infinite;
    }
    @keyframes ticker{
      0%{transform:translateX(0);}
      100%{transform:translateX(-100%);}
    }

    /* STROBE (unchanged) */
    @keyframes flash{
      0%{background-color:black;}
      50%{background-color:white;}
      100%{background-color:black;}
    }
    .flash-screen{
      animation:flash 0.125s infinite;
    }

    /* FX canvas sits behind UI but above background */
    #fxCanvas{
      position:fixed;
      inset:0;
      z-index:5;
      pointer-events:none;
    }

    /* Split shutters */
    #split{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:20;
      opacity:0;
    }
    .split-panel{
      position:absolute;
      top:-20%;
      bottom:-20%;
      width:60vw;
      background:#fff;
      transform: rotate(-35deg) translateX(0);
      opacity:0;
    }
    #splitLeft{ left:-70vw; }
    #splitRight{ right:-70vw; }
    .split-on{ opacity:1; }
  </style>
</head>

<body>
  <canvas id="fxCanvas"></canvas>

  <h1>
    <div id="ketaWord" aria-label="KETADATA"></div>
    <p class="subtitle">INFINITE INTER /// FACE APPARATUS</p>

    <nav class="nav-links">
      <a href="room.html" class="nav-item">[05]</a>
      <a href="kdtv1.html" class="nav-item">[01]</a>
      <a href="temple.html" class="nav-item">[02]</a>
      <a href="crunch1.html" class="nav-item">[03]</a>
      <a href="subgpt.html" class="nav-item">[04]</a>
      <a href="room2.html" class="nav-item">[05a]</a>
      <a href="shop.html" class="nav-item">[06]</a>
      <a href="misc.html" class="nav-item">[07]</a>
      <a href="tester3.html" class="nav-item">[08]</a>
      <a href="labyrinth.html" class="nav-item">[09]</a>
      <a href="map.html" class="nav-item">[10]</a>
      <a href="slopstream6.html" class="nav-item">[11]</a>
      <a href="bleak.html" class="nav-item">[12]</a>
      <a href="ball.html" class="nav-item">[13]</a>
      <a href="elevator3.html" class="nav-item">[14]</a>
      <a href="shell8.html" class="nav-item">[15]</a>
      <a href="aura2.html" class="nav-item">[16]</a>
    </nav>
  </h1>

  <p id="warning">
    B A D&nbsp;&nbsp;G A T E W A Y<br/>
    MAY TRIGGER SEIZURES IN PHOTOSENSITIVE INDIVIDUALS
  </p>

  <div class="meow-ticker">
    <div class="meow-content">
      MEOW — MIAOU — MIAU — MIAO — MIAUW — MJAU — MJAV — MIAV — MIJAV — MIJAU — MIYAV — MIYAO — MIAAO — MIAOO — MIAOOO — МЯУ — МЯУУ — MYAU — МЬЯУ — МЯУМ — НЯВ — МИЙАУ — МИЙАВ — NIAOU — NYA — NYAA — NYAN — にゃー — ニャー — にゃお — にゃーー — 야옹 — 냐아옹 — 냥 — 喵 — 喵喵 —
    </div>
    <div class="meow-content">
      MEOW — MIAOU — MIAU — MIAO — MIAUW — MJAU — MJAV — MIAV — MIJAV — MIJAU — MIYAV — MIYAO — MIAAO — MIAOO — MIAOOO — МЯУ — МЯУУ — MYAU — МЬЯУ — МЯУМ — НЯВ — МИЙАУ — МИЙАВ — NIAOU — NYA — NYAA — NYAN — にゃー — ニャー — にゃお — にゃーー — 야옹 — 냐아옹 — 냥 — 喵 — 喵喵 —
    </div>
  </div>

  <div id="split">
    <div id="splitLeft" class="split-panel"></div>
    <div id="splitRight" class="split-panel"></div>
  </div>

  <script>
    const ketaWord = document.getElementById("ketaWord");
    const split = document.getElementById("split");
    const splitLeft = document.getElementById("splitLeft");
    const splitRight = document.getElementById("splitRight");

    const canvas = document.getElementById("fxCanvas");
    const ctx = canvas.getContext("2d", { alpha: true });

    function resize(){
      const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      ctx.lineCap = "butt";
      ctx.lineJoin = "miter";
    }
    window.addEventListener("resize", resize);
    resize();

    const word = "KETADATA";
    const letters = [];

    // Build fixed-width cells; per-letter hover transforms that letter into "/"
    for (const ch of word) {
      const cell = document.createElement("span");
      cell.className = "cell";

      const s = document.createElement("span");
      s.className = "ch";
      s.textContent = ch;
      s.dataset.orig = ch;

      s.addEventListener("mouseenter", () => {
        if (ketaWord.dataset.locked === "1") return;
        s.textContent = "/";
      });
      s.addEventListener("mouseleave", () => {
        if (ketaWord.dataset.locked === "1") return;
        s.textContent = s.dataset.orig;
      });

      cell.appendChild(s);
      ketaWord.appendChild(cell);
      letters.push(s);
    }

    let entering = false;

    function rand(min, max){ return min + Math.random() * (max - min); }

    // "/" direction: up-right
    const dirF = (() => {
      let x = 1, y = -1;
      const l = Math.hypot(x,y);
      return { x: x/l, y: y/l };
    })();
    // opposite direction: down-left
    const dirB = { x: -dirF.x, y: -dirF.y };

    const perpF = { x: -dirF.y, y: dirF.x };

    // Streak particles (white dust in LINE BANDS)
    const particles = [];
    let running = false;
    let emitUntil = 0;

    function addParticle(sx, sy, vx, vy){
      const len = rand(22, 120);
      const thick = rand(2.2, 6.4);
      const life = rand(1.6, 3.9);
      const fade = rand(0.12, 0.24);

      particles.push({
        x: sx, y: sy,
        vx, vy,
        len, thick,
        life, age: 0,
        fade
      });
    }

    function centers(){
      return letters.map(el => {
        const r = el.getBoundingClientRect();
        return { x: r.left + r.width/2, y: r.top + r.height/2 };
      });
    }

    // Emit thick diagonal line bands BOTH DIRECTIONS from each slash source
    function emitFromSources(srcs, dt){
      const bands = 11;
      const bandSpacing = 14;
      const rateBase = 150; // stronger expulsion

      for (const s of srcs){
        const perFrame = rateBase * dt;

        const n = Math.floor(perFrame);
        const frac = perFrame - n;
        const total = n + (Math.random() < frac ? 1 : 0);

        for (let i=0; i<total; i++){
          const b = Math.floor(Math.random()*bands) - Math.floor(bands/2);
          const bandOffset = b * bandSpacing + rand(-4, 4);

          const jx = rand(-6, 6);
          const jy = rand(-6, 6);

          // choose forward or backward emission
          const forward = Math.random() < 0.5;
          const dir = forward ? dirF : dirB;

          const speed = rand(520, 980);
          const vx = dir.x * speed + perpF.x * bandOffset * 0.9;
          const vy = dir.y * speed + perpF.y * bandOffset * 0.9;

          addParticle(
            s.x + jx + perpF.x * bandOffset,
            s.y + jy + perpF.y * bandOffset,
            vx, vy
          );
        }
      }
    }

    function draw(dt){
      // slow alpha clear for trails
      ctx.fillStyle = "rgba(0,0,0,0.10)";
      ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);

      for (let i = particles.length - 1; i >= 0; i--){
        const p = particles[i];
        p.age += dt;
        if (p.age >= p.life){
          particles.splice(i, 1);
          continue;
        }

        p.x += p.vx * dt;
        p.y += p.vy * dt;

        const t = p.age / p.life;
        const a = Math.max(0, 1 - t);
        const alpha = a * (1 - p.fade * t);

        ctx.globalAlpha = alpha;
        ctx.lineWidth = p.thick;
        ctx.strokeStyle = "#ffffff";

        // trail aligned to velocity direction
        const vlen = Math.hypot(p.vx, p.vy) || 1;
        const ux = p.vx / vlen;
        const uy = p.vy / vlen;

        const tx = p.x - ux * p.len;
        const ty = p.y - uy * p.len;

        ctx.beginPath();
        ctx.moveTo(p.x, p.y);
        ctx.lineTo(tx, ty);
        ctx.stroke();
      }

      ctx.globalAlpha = 1;
    }

    let lastT = 0;
    let srcs = [];

    function loop(t){
      if (!running) return;
      const now = t / 1000;
      const dt = Math.min(0.033, Math.max(0.001, now - lastT));
      lastT = now;

      if (now < emitUntil){
        emitFromSources(srcs, dt);
      }

      draw(dt);
      requestAnimationFrame(loop);
    }

    function screenSplitRevealThenRedirect(){
      split.classList.add("split-on");
      splitLeft.style.opacity = "1";
      splitRight.style.opacity = "1";

      splitLeft.animate(
        [
          { transform: "rotate(-35deg) translateX(0)", opacity: 0.0 },
          { transform: "rotate(-35deg) translateX(95vw)", opacity: 0.98 },
          { transform: "rotate(-35deg) translateX(160vw)", opacity: 0.0 }
        ],
        { duration: 1750, easing: "cubic-bezier(0.12, 0.9, 0.1, 1)", fill: "forwards" }
      );

      splitRight.animate(
        [
          { transform: "rotate(-35deg) translateX(0)", opacity: 0.0 },
          { transform: "rotate(-35deg) translateX(-95vw)", opacity: 0.98 },
          { transform: "rotate(-35deg) translateX(-160vw)", opacity: 0.0 }
        ],
        { duration: 1750, easing: "cubic-bezier(0.12, 0.9, 0.1, 1)", fill: "forwards" }
      );

      setTimeout(() => {
        window.location.href = "https://ketadata.com/shell8.html";
      }, 1600);
    }

    ketaWord.addEventListener("click", () => {
      if (entering) return;
      entering = true;

      // Lock whole word to slashes instantly
      ketaWord.dataset.locked = "1";
      letters.forEach(s => s.textContent = "/");

      // Start bi-directional dispersion
      ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      srcs = centers();

      running = true;
      lastT = performance.now()/1000;

      const sustainSeconds = 7.5;
      emitUntil = lastT + sustainSeconds;

      requestAnimationFrame(loop);

      // Fade word slowly after transformation
      ketaWord.animate([{opacity:1},{opacity:0}], { duration: 1400, delay: 450, easing:"linear", fill:"forwards" });

      setTimeout(() => {
        screenSplitRevealThenRedirect();
      }, Math.floor(sustainSeconds * 1000) + 650);
    });

    // STROBE TOGGLE (SPACE) — preserved
    let isFlashing = false;
    let flashInterval;

    function startStrobe(){
      flashInterval = setInterval(() => {
        document.body.style.backgroundColor =
          (document.body.style.backgroundColor === "black") ? "white" : "black";
      }, 50);
    }

    function stopStrobe(){
      clearInterval(flashInterval);
      document.body.style.backgroundColor = "black";
    }

    document.addEventListener("keydown", (event) => {
      if (event.key === " " || event.code === "Space") {
        event.preventDefault();
        if (isFlashing) stopStrobe(); else startStrobe();
        isFlashing = !isFlashing;
      }
    });

    // HOTKEYS — preserved
    document.addEventListener("keydown", (event) => {
      if (event.key >= "1" && event.key <= "6") window.location.href = event.key + ".html";
      if (event.key.toLowerCase() === "m") window.location.href = "map.html";
      if (event.key.toLowerCase() === "r") window.location.href = "room.html";
    });
  </script>

  <!--
  AE:
  - BLOCK MOVED DOWN (32vh).
  - LETTER WIDTH LOCKED (1ch) SO "/" DOES NOT SHIFT NEIGHBORS.
  - NAV + TICKER INTENTIONALLY EFFECTIVELY INVISIBLE.
  - NO SCROLL. NO LINES.

  EE:
  - PER-LETTER HOVER: LETTER -> "/"
  - CLICK: WORD LOCKS TO "/" THEN THICK WHITE DIAGONAL LINE-BANDS DISPERSION
    IN BOTH DIRECTIONS (UP-RIGHT AND DOWN-LEFT) FROM EACH SLASH SOURCE,
    SUSTAINED FORCE + TRAILS, THEN SCREEN SPLIT -> shell8 REDIRECT.

  WB:
  FILE_ID: index
  ROOM_ID: ENTRY
  VERSION: v1.0.6
  UPDATED_AT: 2025-12-24
  CHANGELOG:
  - Dispersion now emits in BOTH directions along slash vectors (up-right and down-left).
  - Maintained thick parallel bands and sustained expulsion.
  -->
</body>
</html>
