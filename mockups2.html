<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>KETADATA BASE MOCKUPS · ACTIVE SETS PLACEMENT</title>
  <style>
    :root{
      --bg:#050505;
      --fg:#f2f2f2;
      --mut:rgba(255,255,255,0.66);
      --dim:rgba(255,255,255,0.42);
      --line:rgba(255,255,255,0.18);
      --line2:rgba(255,255,255,0.10);
      --panel:rgba(0,0,0,0.35);
      --panel2:rgba(0,0,0,0.22);

      --fs:12px; /* SAME SIZE LAW */
      --lh:1.25;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --ui: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      --motion:1;
      --invert:0;
      --mock:1; /* 1..4 */
      --titleScale:1.0;
      --flood:0; /* 0..1 */
      --floodHue:300; /* acid */
      --floodSat:85;
      --floodLum:55;

      --noteOpen:1;
      --noteX: 26px;
      --noteY: 88px;
      --noteW: 360px;
      --noteH: 220px;

      --zNote: 9999;
      --zTop: 1000;
    }

    html,body{height:100%;}
    body{
      margin:0;
      overflow:hidden;
      background:var(--bg);
      color:var(--fg);
      font-family:var(--ui);
      font-size:var(--fs);
      line-height:var(--lh);
      letter-spacing:0.02em;
    }
    *{box-sizing:border-box;}
    button,input,textarea,select{
      font:inherit;
      font-size:var(--fs);
      line-height:var(--lh);
      letter-spacing:0.02em;
      color:var(--fg);
      background:#000;
      border:1px solid var(--line2);
      padding:6px 8px;
      outline:none;
    }
    button{cursor:pointer;background:rgba(0,0,0,0.28);}
    button:hover{border-color:var(--line);}
    button:active{transform:translateY(1px);}
    input[type="range"]{padding:0;height:18px;}
    .mono{font-family:var(--mono);}
    .caps{letter-spacing:0.12em;text-transform:uppercase;font-weight:800;}
    .mut{color:var(--mut);}
    .dim{color:var(--dim);}

    /* ---------- STAGE ---------- */
    .stage{
      position:fixed; inset:0;
      background:
        radial-gradient(circle at 28% 22%, rgba(255,255,255,0.06), transparent 55%),
        radial-gradient(circle at 78% 65%, rgba(255,255,255,0.04), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0));
    }
    .stage::before{
      content:"";
      position:absolute; inset:-80px;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.06) 1px, transparent 1px, transparent 30px),
        repeating-linear-gradient(0deg, rgba(255,255,255,0.05), rgba(255,255,255,0.05) 1px, transparent 1px, transparent 30px);
      opacity: calc(0.14 * var(--motion));
      transform: translate3d(0,0,0);
      animation: drift 18s linear infinite;
      pointer-events:none;
    }
    @keyframes drift{
      0%{ transform: translate3d(0,0,0); }
      100%{ transform: translate3d(-60px,-60px,0); }
    }

    /* acid flood overlay (optional) */
    .flood{
      position:absolute; inset:0;
      pointer-events:none;
      background:
        radial-gradient(circle at 30% 35%,
          hsla(var(--floodHue), var(--floodSat)%, var(--floodLum)%, 0.22),
          transparent 58%),
        radial-gradient(circle at 72% 60%,
          hsla(calc(var(--floodHue) + 80), var(--floodSat)%, var(--floodLum)%, 0.18),
          transparent 62%),
        linear-gradient(135deg,
          hsla(calc(var(--floodHue) + 140), var(--floodSat)%, var(--floodLum)%, 0.10),
          transparent 60%);
      opacity: var(--flood);
      mix-blend-mode: screen;
      filter: saturate(1.15) contrast(1.05);
    }

    /* ---------- TOP SHELL BAR ---------- */
    .topbar{
      position:absolute; left:0; right:0; top:0;
      height:44px;
      z-index:var(--zTop);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 12px;
      border-bottom:1px solid var(--line2);
      background:linear-gradient(to bottom, rgba(0,0,0,0.72), rgba(0,0,0,0.34));
      backdrop-filter: blur(10px);
    }
    .tbLeft,.tbCenter,.tbRight{display:flex;align-items:center;gap:8px;min-width:220px;}
    .tbCenter{flex:1; justify-content:center; min-width:0; pointer-events:none;}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 8px;
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.22);
    }
    .chip .k{color:var(--mut);}
    .chip .v{font-family:var(--mono);}
    .pill{
      display:inline-flex;align-items:center;gap:6px;
      padding:4px 6px;
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.22);
      color:var(--mut);
      font-family:var(--mono);
      letter-spacing:0.08em;
      text-transform:uppercase;
      user-select:none;
      cursor:pointer;
    }
    .pill:hover{border-color:var(--line);color:var(--fg);}
    .pill.on{border-color:var(--line);color:var(--fg);background:rgba(255,255,255,0.06);}
    .mini{
      padding:3px 6px;
      font-family:var(--mono);
      letter-spacing:0.10em;
      text-transform:uppercase;
      color:var(--dim);
      border:1px solid transparent;
      user-select:none;
    }

    /* ---------- PINNED RAIL (YOUR CURRENT THING) ---------- */
    .pinned{
      position:absolute;
      left:12px;
      top:56px;
      width: 640px;
      max-width: calc(100vw - 24px);
      z-index:20;
    }
    .bar{
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.22);
      padding:10px;
    }
    .barRow{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:nowrap;
      overflow:hidden;
    }
    .label{
      font-family:var(--mono);
      letter-spacing:0.10em;
      text-transform:uppercase;
      color:var(--dim);
      white-space:nowrap;
    }
    .btn{
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.28);
      padding:6px 10px;
      cursor:pointer;
      user-select:none;
      font-family:var(--mono);
      letter-spacing:0.08em;
      text-transform:uppercase;
      white-space:nowrap;
    }
    .btn:hover{border-color:var(--line);}
    .field{
      flex:1;
      min-width: 140px;
      display:flex;
      align-items:center;
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.25);
      padding:6px 8px;
      color:var(--fg);
      font-family:var(--mono);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .rooms{
      margin-top:10px;
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.22);
      padding:10px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .rooms .btn{font-weight:700;}

    /* ---------- MAIN VOID ---------- */
    .void{
      position:absolute;
      inset:44px 0 0 0;
      padding: 12px;
    }

    /* ---------- ACTIVE SETS MOCKUPS (4 placements) ---------- */
    .active{
      position:absolute;
      z-index:30;
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.22);
      box-shadow: 0 14px 40px rgba(0,0,0,0.40);
    }
    .activeHead{
      display:flex;align-items:center;justify-content:space-between;
      gap:10px;
      padding:10px;
      border-bottom:1px solid var(--line2);
      background:rgba(0,0,0,0.32);
      user-select:none;
    }
    .activeHead .t{font-family:var(--mono);letter-spacing:0.12em;text-transform:uppercase;font-weight:800;}
    .activeHead .s{color:var(--dim);font-family:var(--mono);letter-spacing:0.10em;text-transform:uppercase;}
    .activeBody{padding:10px;}
    .strip{
      display:flex;
      gap:8px;
      flex-wrap:nowrap;
      overflow:auto;
      padding-bottom:6px;
    }
    .slot{
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.26);
      padding:8px 10px;
      font-family:var(--mono);
      letter-spacing:0.10em;
      text-transform:uppercase;
      cursor:pointer;
      white-space:nowrap;
      user-select:none;
    }
    .slot:hover{border-color:var(--line);}
    .slot.on{border-color:var(--line);background:rgba(255,255,255,0.06);}
    .pad{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:8px;
    }
    .key{
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.26);
      padding:14px 10px;
      font-family:var(--mono);
      letter-spacing:0.12em;
      text-transform:uppercase;
      text-align:center;
      cursor:pointer;
      user-select:none;
    }
    .key:hover{border-color:var(--line);}
    .key.on{border-color:var(--line);background:rgba(255,255,255,0.06);}

    /* active drawer */
    .drawerTab{
      position:absolute;
      right:0; top:120px;
      z-index:31;
      border:1px solid var(--line2);
      border-right:none;
      background:rgba(0,0,0,0.32);
      padding:10px 8px;
      writing-mode:vertical-rl;
      transform: rotate(180deg);
      font-family:var(--mono);
      letter-spacing:0.14em;
      text-transform:uppercase;
      color:var(--mut);
      cursor:pointer;
      user-select:none;
    }
    .drawer{
      position:absolute;
      top:100px;
      right:0;
      width:320px;
      height:380px;
      transform: translateX(100%);
      transition: transform 120ms linear;
      z-index:30;
      border-left:1px solid var(--line2);
      border-top:1px solid var(--line2);
      border-bottom:1px solid var(--line2);
      background:rgba(0,0,0,0.22);
      box-shadow: -10px 0 35px rgba(0,0,0,0.45);
    }
    .drawer.open{transform: translateX(0);}
    .drawer .activeHead{border-bottom:1px solid var(--line2);}

    /* stacked cards */
    .cards{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .card{
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.22);
      padding:10px;
    }
    .card .h{
      display:flex;justify-content:space-between;gap:10px;align-items:center;
      margin-bottom:8px;
      user-select:none;
    }
    .card .h .t{
      font-family:var(--mono);
      letter-spacing:0.12em;
      text-transform:uppercase;
      font-weight:800;
    }
    .card .h .s{color:var(--dim);font-family:var(--mono);letter-spacing:0.10em;text-transform:uppercase;}
    .link{
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.26);
      padding:6px 8px;
      margin-top:6px;
      font-family:var(--mono);
      word-break:break-all;
      cursor:pointer;
    }
    .link:hover{border-color:var(--line);}

    /* ---------- EYE GUIDE (OPTIONAL OVERLAY) ---------- */
    .gaze{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity 120ms linear;
    }
    .gaze.on{opacity:1;}
    .gaze::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 18% 14%, rgba(255,255,255,0.18), transparent 28%),
        radial-gradient(circle at 18% 30%, rgba(255,255,255,0.12), transparent 32%),
        radial-gradient(circle at 70% 22%, rgba(255,255,255,0.10), transparent 36%),
        radial-gradient(circle at 85% 40%, rgba(255,255,255,0.08), transparent 38%),
        radial-gradient(circle at 60% 78%, rgba(255,255,255,0.06), transparent 42%);
      mix-blend-mode: screen;
    }

    /* ---------- KETA_NOTE (REQUIRED) ---------- */
    .noteIcon{
      position:fixed;
      top: 58px;
      right: 12px;
      z-index: var(--zTop);
      width: 18px;
      height: 18px;
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.25);
      cursor:pointer;
      user-select:none;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .noteIcon .sq{
      width: 10px;
      height: 10px;
      border:1px solid var(--line2);
      background: rgba(255,255,255,0.00);
    }
    .noteIcon.open .sq{background: rgba(255,255,255,0.86);}
    .note{
      position:fixed;
      left: var(--noteX);
      top: var(--noteY);
      width: var(--noteW);
      height: var(--noteH);
      z-index: var(--zNote);
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.38);
      display:none;
      box-shadow: 0 22px 60px rgba(0,0,0,0.55);
    }
    .note.open{display:block;}
    .noteBar{
      height:34px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      padding:0 10px;
      border-bottom:1px solid var(--line2);
      background:rgba(0,0,0,0.42);
      cursor:move;
      user-select:none;
    }
    .noteBar .t{
      font-family:var(--mono);
      letter-spacing:0.12em;
      text-transform:uppercase;
      font-weight:900;
    }
    .noteBar .r{display:flex;gap:8px;align-items:center;}
    .noteBody{
      padding:10px;
      height: calc(100% - 34px);
    }
    textarea{
      width:100%;
      height:100%;
      resize:none;
      background:rgba(0,0,0,0.22);
      border:1px solid var(--line2);
      color:var(--fg);
      padding:10px;
      font-family:var(--mono);
      letter-spacing:0.02em;
    }

    /* ---------- MOCK SWITCHER ---------- */
    .mockHud{
      position:fixed;
      left:12px;
      bottom:12px;
      z-index:var(--zTop);
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.32);
      padding:10px;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      user-select:none;
    }
    .mockBtn{
      border:1px solid var(--line2);
      background:rgba(0,0,0,0.26);
      padding:6px 10px;
      font-family:var(--mono);
      letter-spacing:0.10em;
      text-transform:uppercase;
      cursor:pointer;
    }
    .mockBtn:hover{border-color:var(--line);}
    .mockBtn.on{border-color:var(--line);background:rgba(255,255,255,0.06);}
    .mockName{
      font-family:var(--mono);
      letter-spacing:0.10em;
      text-transform:uppercase;
      color:var(--mut);
      padding:0 6px;
    }

    /* ---------- TITLE FOCAL TEXT (OPTIONAL) ---------- */
    .centerTitle{
      position:absolute;
      left:50%;
      top:52%;
      transform:translate(-50%,-50%);
      font-family:var(--mono);
      letter-spacing:0.18em;
      text-transform:uppercase;
      font-weight:900;
      opacity:0.08;
      user-select:none;
      pointer-events:none;
      white-space:nowrap;
      font-size: calc(var(--fs) * 12 * var(--titleScale));
    }

    /* ---------- INVERT ---------- */
    body.invert{
      background:#f2f2f2;
      color:#060606;
    }
    body.invert .stage{background:#f2f2f2;}
    body.invert .stage::before{
      background:
        repeating-linear-gradient(90deg, rgba(0,0,0,0.10), rgba(0,0,0,0.10) 1px, transparent 1px, transparent 30px),
        repeating-linear-gradient(0deg, rgba(0,0,0,0.08), rgba(0,0,0,0.08) 1px, transparent 1px, transparent 30px);
    }
    body.invert .bar, body.invert .rooms, body.invert .active, body.invert .drawer, body.invert .card, body.invert .mockHud, body.invert .note{
      background:rgba(255,255,255,0.78);
      border-color:rgba(0,0,0,0.14);
    }
    body.invert .topbar{
      background:linear-gradient(to bottom, rgba(255,255,255,0.88), rgba(255,255,255,0.62));
      border-bottom-color:rgba(0,0,0,0.14);
    }
    body.invert .chip, body.invert .pill, body.invert .btn, body.invert .field, body.invert .slot, body.invert .key, body.invert .link, body.invert textarea, body.invert .noteIcon{
      background:rgba(255,255,255,0.88);
      border-color:rgba(0,0,0,0.14);
      color:#060606;
    }
    body.invert .pill{color:rgba(0,0,0,0.65);}
    body.invert .pill.on{color:#060606;background:rgba(0,0,0,0.04);}
    body.invert .label, body.invert .dim, body.invert .mut, body.invert .chip .k{color:rgba(0,0,0,0.62);}
    body.invert .noteIcon .sq{border-color:rgba(0,0,0,0.22);}
    body.invert .noteIcon.open .sq{background:rgba(0,0,0,0.86);}
  </style>
</head>

<body>
  <div class="stage" id="stage">
    <div class="flood" id="flood"></div>

    <div class="topbar">
      <div class="tbLeft">
        <div class="chip"><span class="k">KETADATA</span><span class="v mono">// SHELL8 //</span><span class="k">KERNEL</span><span class="v mono">v1</span></div>
        <div class="mini mono">ROOM</div>
        <div class="chip"><span class="v mono">STUDIO</span></div>
      </div>

      <div class="tbCenter">
        <div class="chip">
          <span class="k">MOCKUP</span>
          <span class="v mono" id="mockReadout">1 STRIP UNDER ROOMS</span>
        </div>
        <div class="chip">
          <span class="k">EYE</span>
          <span class="v mono" id="eyeReadout">GUIDE OFF</span>
        </div>
      </div>

      <div class="tbRight">
        <span class="pill" id="pillGaze">EYE GUIDE</span>
        <span class="pill" id="pillFlood">ACID</span>
        <span class="pill" id="pillMotion">MOTION</span>
        <span class="pill" id="pillInvert">INVERT</span>
        <span class="pill" id="pillNull">NULL</span>
      </div>
    </div>

    <!-- KETA_NOTE ICON (white square law) -->
    <div class="noteIcon" id="noteIcon" title="KETA_NOTE (SHIFT+K)">
      <div class="sq"></div>
    </div>

    <!-- PINNED RAIL (as you like it) -->
    <div class="pinned" id="pinned">
      <div class="bar">
        <div class="barRow">
          <div class="label">ARMED</div>
          <div class="btn">STUDIO</div>
          <div class="btn">GO</div>
          <div class="btn">NEW TAB</div>
          <div class="btn">COPY URL</div>
          <div class="field">tester3.html</div>
        </div>
      </div>

      <div class="rooms">
        <div class="btn">CALENDAR</div>
        <div class="btn">POD</div>
        <div class="btn">WORLD</div>
        <div class="btn">KDTV</div>
        <div class="btn">PHOTOBOOTH</div>
        <div class="btn">STUDIO</div>
        <div class="btn">LAB</div>
      </div>
    </div>

    <div class="void">
      <div class="centerTitle" id="centerTitle">ACTIVE SETS</div>

      <!-- Mockup 1: ACTIVE STRIP UNDER ROOMS -->
      <div class="active" id="activeStrip" style="left:12px; top: 168px; width: 640px;">
        <div class="activeHead">
          <div class="t">ACTIVE</div>
          <div class="r">
            <div class="s">STRIP</div>
            <button id="edit1">EDIT</button>
          </div>
        </div>
        <div class="activeBody">
          <div class="strip">
            <div class="slot on">1 TODAY</div>
            <div class="slot">2 BUILD</div>
            <div class="slot">3 LINKS</div>
            <div class="slot">4 VISUAL</div>
            <div class="slot">5 LAB</div>
            <div class="slot">6 VAULT</div>
            <div class="slot">7 OBS</div>
            <div class="slot">8 SHOP</div>
            <div class="slot">9 MISC</div>
          </div>
          <div class="dim mono">CLICK SLOT = OPEN SET (NOTE-LIKE OVERLAY)</div>
        </div>
      </div>

      <!-- Mockup 2: ACTIVE PAD TOP-RIGHT -->
      <div class="active" id="activePad" style="right:12px; top: 88px; width: 320px;">
        <div class="activeHead">
          <div class="t">ACTIVE</div>
          <div class="r">
            <div class="s">PAD</div>
            <button id="edit2">EDIT</button>
          </div>
        </div>
        <div class="activeBody">
          <div class="pad">
            <div class="key on">1 TODAY</div>
            <div class="key">2 BUILD</div>
            <div class="key">3 LINKS</div>
            <div class="key">4 VISUAL</div>
            <div class="key">5 LAB</div>
            <div class="key">6 VAULT</div>
            <div class="key">7 OBS</div>
            <div class="key">8 SHOP</div>
            <div class="key">9 MISC</div>
          </div>
        </div>
      </div>

      <!-- Mockup 3: ACTIVE DRAWER RIGHT EDGE -->
      <div class="drawerTab" id="drawerTab">ACTIVE</div>
      <div class="drawer" id="drawer">
        <div class="activeHead">
          <div class="t">ACTIVE</div>
          <div class="r">
            <div class="s">DRAWER</div>
            <button id="edit3">EDIT</button>
          </div>
        </div>
        <div class="activeBody">
          <div class="strip" style="flex-wrap:wrap; overflow:visible;">
            <div class="slot on" style="flex:1 1 45%;">1 TODAY</div>
            <div class="slot" style="flex:1 1 45%;">2 BUILD</div>
            <div class="slot" style="flex:1 1 45%;">3 LINKS</div>
            <div class="slot" style="flex:1 1 45%;">4 VISUAL</div>
            <div class="slot" style="flex:1 1 45%;">5 LAB</div>
            <div class="slot" style="flex:1 1 45%;">6 VAULT</div>
          </div>
          <div class="dim mono" style="margin-top:8px;">DEFAULT CLOSED. OPEN WHEN NEEDED.</div>
        </div>
      </div>

      <!-- Mockup 4: STACKED CARDS CENTER-LEFT -->
      <div class="active" id="activeCards" style="left: 12px; top: 240px; width: 460px;">
        <div class="activeHead">
          <div class="t">ACTIVE</div>
          <div class="r">
            <div class="s">CARDS</div>
            <button id="edit4">EDIT</button>
          </div>
        </div>
        <div class="activeBody">
          <div class="cards">
            <div class="card">
              <div class="h"><div class="t">SET 1 TODAY</div><div class="s">6</div></div>
              <div class="link">/system.html</div>
              <div class="link">/studio.html</div>
              <div class="link">/link-triage.html</div>
            </div>
            <div class="card">
              <div class="h"><div class="t">SET 2 BUILD</div><div class="s">8</div></div>
              <div class="link">/set-arranger.html</div>
              <div class="link">/photobooth.html</div>
              <div class="link">/kdtv1.html</div>
            </div>
          </div>
        </div>
      </div>

      <!-- EYE GUIDE OVERLAY -->
      <div class="gaze" id="gaze"></div>
    </div>

    <!-- KETA_NOTE WINDOW -->
    <div class="note" id="note">
      <div class="noteBar" id="noteBar">
        <div class="t">KETA_NOTE</div>
        <div class="r">
          <button id="noteCopy">COPY</button>
          <button id="noteClose">CLOSE</button>
        </div>
      </div>
      <div class="noteBody">
        <textarea id="noteText">ACTIVE SETS PLACEMENT MOCKUPS
1 STRIP UNDER ROOMS
2 PAD TOP RIGHT
3 RIGHT DRAWER
4 STACKED CARDS

WHAT PULLS THE EYE? WHAT FEELS LIKE “RAIL 2” WITHOUT CORRUPTING PINNED?</textarea>
      </div>
    </div>

    <!-- MOCK HUD -->
    <div class="mockHud">
      <div class="mockName" id="hudName">SHOW: 1 STRIP</div>
      <div class="mockBtn on" data-m="1">1 STRIP</div>
      <div class="mockBtn" data-m="2">2 PAD</div>
      <div class="mockBtn" data-m="3">3 DRAWER</div>
      <div class="mockBtn" data-m="4">4 CARDS</div>
      <div class="mockBtn" id="showAll">ALL</div>
      <div class="mockBtn" id="titlePlus">TITLE +</div>
      <div class="mockBtn" id="titleMinus">TITLE -</div>
    </div>
  </div>

  <script>
    const $ = (id)=>document.getElementById(id);
    const $$ = (sel)=>Array.from(document.querySelectorAll(sel));

    const state = {
      motion:true,
      invert:false,
      nul:false,
      gaze:false,
      acid:false,
      mock:1,
      showAll:false,
      titleScale:1.0,

      noteOpen:true,
      noteX:26,
      noteY:88,
      noteW:360,
      noteH:220
    };

    const EL = {
      pillMotion:$("pillMotion"),
      pillInvert:$("pillInvert"),
      pillNull:$("pillNull"),
      pillGaze:$("pillGaze"),
      pillFlood:$("pillFlood"),
      gaze:$("gaze"),
      flood:$("flood"),

      mockReadout:$("mockReadout"),
      eyeReadout:$("eyeReadout"),
      hudName:$("hudName"),

      activeStrip:$("activeStrip"),
      activePad:$("activePad"),
      drawerTab:$("drawerTab"),
      drawer:$("drawer"),
      activeCards:$("activeCards"),

      centerTitle:$("centerTitle"),

      noteIcon:$("noteIcon"),
      note:$("note"),
      noteBar:$("noteBar"),
      noteText:$("noteText"),
      noteCopy:$("noteCopy"),
      noteClose:$("noteClose"),

      showAll:$("showAll"),
      titlePlus:$("titlePlus"),
      titleMinus:$("titleMinus"),
    };

    const mockNames = {
      1:"1 STRIP UNDER ROOMS",
      2:"2 PAD TOP RIGHT",
      3:"3 RIGHT DRAWER",
      4:"4 STACKED CARDS"
    };

    function apply(){
      document.documentElement.style.setProperty("--motion", state.motion ? "1" : "0");
      document.body.classList.toggle("invert", state.invert);

      EL.pillMotion.classList.toggle("on", state.motion);
      EL.pillInvert.classList.toggle("on", state.invert);
      EL.pillNull.classList.toggle("on", state.nul);
      EL.pillGaze.classList.toggle("on", state.gaze);
      EL.pillFlood.classList.toggle("on", state.acid);

      EL.gaze.classList.toggle("on", state.gaze);
      EL.flood.style.opacity = state.acid ? "1" : "0";

      // title scale
      EL.centerTitle.style.setProperty("--titleScale", String(state.titleScale));
      document.documentElement.style.setProperty("--titleScale", String(state.titleScale));

      // show/hide mockups
      const show = (id, on)=>{ $(id).style.display = on ? "" : "none"; };
      const showDrawer = (on)=>{
        EL.drawerTab.style.display = on ? "" : "none";
        EL.drawer.style.display = on ? "" : "none";
      };

      if(state.showAll){
        show("activeStrip", true);
        show("activePad", true);
        showDrawer(true);
        show("activeCards", true);
      }else{
        show("activeStrip", state.mock===1);
        show("activePad", state.mock===2);
        showDrawer(state.mock===3);
        show("activeCards", state.mock===4);
      }

      // drawer open only in mock 3 or showAll
      if(state.mock===3 || state.showAll) EL.drawer.classList.add("open");
      else EL.drawer.classList.remove("open");

      // readouts
      const label = state.showAll ? "ALL MOCKUPS" : mockNames[state.mock];
      EL.mockReadout.textContent = label;
      EL.hudName.textContent = "SHOW: " + (state.showAll ? "ALL" : (state.mock + " " + label.split(" ").slice(1).join(" ")));
      EL.eyeReadout.textContent = state.gaze ? "GUIDE ON" : "GUIDE OFF";

      // NULL: hide everything except the pinned rail + active + optional note icon
      const hide = state.nul;
      document.querySelector(".topbar").style.display = hide ? "none" : "";
      document.querySelector(".mockHud").style.display = hide ? "none" : "";
      EL.centerTitle.style.display = hide ? "none" : "";
      EL.noteIcon.style.display = hide ? "none" : "";

      // note
      EL.note.classList.toggle("open", state.noteOpen && !hide);
      EL.noteIcon.classList.toggle("open", state.noteOpen && !hide);
    }

    // pills
    EL.pillMotion.onclick=()=>{ state.motion=!state.motion; apply(); };
    EL.pillInvert.onclick=()=>{ state.invert=!state.invert; apply(); };
    EL.pillNull.onclick=()=>{ state.nul=!state.nul; apply(); };
    EL.pillGaze.onclick=()=>{ state.gaze=!state.gaze; apply(); };
    EL.pillFlood.onclick=()=>{ state.acid=!state.acid; apply(); };

    // drawer toggle
    EL.drawerTab.onclick=()=>{
      EL.drawer.classList.toggle("open");
    };

    // hud mock buttons
    $$(".mockBtn[data-m]").forEach(b=>{
      b.onclick=()=>{
        state.showAll=false;
        state.mock = Number(b.getAttribute("data-m"));
        $$(".mockBtn[data-m]").forEach(x=>x.classList.toggle("on", x===b));
        apply();
      };
    });
    EL.showAll.onclick=()=>{
      state.showAll = !state.showAll;
      EL.showAll.classList.toggle("on", state.showAll);
      apply();
    };
    EL.titlePlus.onclick=()=>{
      state.titleScale = Math.min(2.2, state.titleScale + 0.1);
      apply();
    };
    EL.titleMinus.onclick=()=>{
      state.titleScale = Math.max(0.3, state.titleScale - 0.1);
      apply();
    };

    // KETA_NOTE toggle
    EL.noteIcon.onclick=()=>{
      state.noteOpen = !state.noteOpen;
      apply();
    };
    EL.noteClose.onclick=()=>{
      state.noteOpen = false;
      apply();
    };
    EL.noteCopy.onclick=async ()=>{
      try{
        await navigator.clipboard.writeText(EL.noteText.value);
      }catch(e){}
    };

    // draggable note
    (function(){
      let drag=false, ox=0, oy=0;
      EL.noteBar.addEventListener("mousedown",(e)=>{
        drag=true;
        const r = EL.note.getBoundingClientRect();
        ox = e.clientX - r.left;
        oy = e.clientY - r.top;
      });
      window.addEventListener("mousemove",(e)=>{
        if(!drag) return;
        const x = Math.max(6, Math.min(e.clientX - ox, window.innerWidth - EL.note.offsetWidth - 6));
        const y = Math.max(50, Math.min(e.clientY - oy, window.innerHeight - EL.note.offsetHeight - 6));
        document.documentElement.style.setProperty("--noteX", x + "px");
        document.documentElement.style.setProperty("--noteY", y + "px");
      });
      window.addEventListener("mouseup",()=>{ drag=false; });
    })();

    // hotkeys: SHIFT+I invert, SHIFT+N null, SHIFT+K note, SHIFT+A acid, SHIFT+G gaze
    window.addEventListener("keydown",(e)=>{
      const k = e.key;
      const s = e.shiftKey;

      if(s && (k==="I"||k==="i")){ state.invert=!state.invert; apply(); }
      if(s && (k==="N"||k==="n")){ state.nul=!state.nul; apply(); }
      if(s && (k==="K"||k==="k")){ state.noteOpen=!state.noteOpen; apply(); }
      if(s && (k==="A"||k==="a")){ state.acid=!state.acid; apply(); }
      if(s && (k==="G"||k==="g")){ state.gaze=!state.gaze; apply(); }

      // 1..4 select mock
      if(!state.showAll && !e.metaKey && !e.ctrlKey && !e.altKey){
        if(k==="1"||k==="2"||k==="3"||k==="4"){
          state.mock = Number(k);
          $$(".mockBtn[data-m]").forEach(x=>x.classList.toggle("on", Number(x.getAttribute("data-m"))===state.mock));
          apply();
        }
      }
    });

    // initialize
    // show only mock 1 at start
    apply();
  </script>

  <!-- ============================================================
    KETADATA HTML SERIALIZATION STAMP
    AE/EE/WB: AE
    FILE_ID: KETADATA_BASE_ACTIVESETS_PLACEMENT_MOCKUPS
    ROOM_ID: BASE
    VERSION: v1
    UPDATED_AT: 2025-12-29T00:00:00-05:00
    CHANGELOG:
    - MOCKUPS: 4 ACTIVE SETS PLACEMENTS COMPLEMENTING EXISTING PINNED RAIL
      (1) STRIP UNDER ROOMS
      (2) PAD TOP RIGHT
      (3) RIGHT DRAWER (DEFAULT CLOSED)
      (4) STACKED CARDS CENTER-LEFT
    - KETA_NOTE INCLUDED: WHITE SQUARE ICON LAW + DRAGGABLE WINDOW + SHIFT+K TOGGLE
    - VISUAL TOOLS: EYE GUIDE TOGGLE, ACID FLOOD TOGGLE, TITLE SCALE +/-
    - HOTKEYS: SHIFT+I INVERT, SHIFT+N NULL, SHIFT+K NOTE, SHIFT+A ACID, SHIFT+G EYE GUIDE
    ============================================================ -->
</body>
</html>
