<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>k-ball</title>
<style>
  html, body {
    height: 100%;
    background: #000;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
    color: #bfbfbf;
    overflow: hidden;
  }

  .container {
    position: relative;
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .orb {
    position: relative;
    width: 420px;
    height: 420px;
    border-radius: 50%;
    background: radial-gradient(circle at 50% 45%, #000 0%, #000 100%);
    box-shadow: inset 0 0 40px rgba(255,255,255,0.05);
    z-index: 2;
    transition: background 3s ease, box-shadow 3s ease;
  }

  /* Continuous gradient glow transition */
  .orb.lit {
    background: radial-gradient(circle at 50% 40%, #0a0a0a 0%, #111 35%, #060606 70%, #000 100%);
    box-shadow:
      inset 0 0 80px rgba(255,255,255,0.25),
      0 0 200px 100px rgba(255,255,255,0.25);
  }

  /* Adds soft pulsing once fully active */
  .orb.glow {
    animation: orbPulse 6s ease-in-out infinite;
  }

  @keyframes orbPulse {
    0%, 100% {
      box-shadow:
        inset 0 0 60px rgba(255,255,255,0.2),
        0 0 250px 120px rgba(255,255,255,0.25),
        0 0 500px 200px rgba(255,255,255,0.08);
      transform: scale(1);
    }
    50% {
      box-shadow:
        inset 0 0 100px rgba(255,255,255,0.35),
        0 0 400px 200px rgba(255,255,255,0.4),
        0 0 700px 300px rgba(255,255,255,0.12);
      transform: scale(1.02);
    }
  }

  /* AURA ELEMENT */
  .orb::before {
    content: "";
    position: absolute;
    top: -150px;
    left: -150px;
    width: 720px;
    height: 720px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.15) 40%, rgba(0,0,0,0) 85%);
    filter: blur(120px);
    z-index: 1;
    opacity: 0;
    transition: opacity 2s ease, filter 2s ease, transform 2s ease;
  }

  .orb.aura::before {
    opacity: 1;
    animation: auraPulse 6s ease-in-out infinite;
  }

  @keyframes auraPulse {
    0%, 100% {
      transform: scale(1);
      opacity: 0.6;
      filter: blur(120px);
    }
    50% {
      transform: scale(1.08);
      opacity: 1;
      filter: blur(150px);
    }
  }

  .phrase {
    position: absolute;
    text-align: center;
    font-size: 1.4rem;
    opacity: 0;
    transition: opacity 1.5s ease;
    max-width: 80%;
    line-height: 2.4rem;
    text-transform: lowercase;
    color: #bfbfbf;
    z-index: 3;
    white-space: pre-line;
  }

  .visible {
    opacity: 1;
  }

  .instruction {
    position: absolute;
    bottom: 60px;
    font-size: 0.9rem;
    color: #666;
    letter-spacing: 0.05em;
    text-transform: lowercase;
  }
</style>
</head>
<body>

<div class="container">
  <div class="orb" id="orb"></div>
  <div class="phrase" id="phrase"></div>
</div>
<div class="instruction">hold space</div>

<audio id="sparkle" preload="auto">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_15fa56c5a0.mp3?filename=sparkle-magic-chime-1-23757.mp3" type="audio/mpeg">
</audio>

<script>
const phrases = [
  "step into absence it holds",
  "the tools respond to your hand",
  "the layer below remains sealed",
  "growth spreads quietly",
  "form hardens into rule",
  "patterns repeat until obeyed",
  "two paths branch from one root",
  "forward only if held steady",
  "gentle pressure bends the wild",
  "light appears in isolation",
  "rotation without master",
  "every weight finds its counterweight",
  "reversal unlocks a hidden axis",
  "the system ends and reconfigures",
  "opposites dissolve toward center",
  "chains glitter but still bind",
  "structure falls in one instant",
  "a faint signal persists",
  "reflections distort the source",
  "illumination leaves nothing hidden",
  "the call cannot be ignored",
  "the circle closes another begins",
  "a spark insists on form",
  "horizons extend but wait",
  "the signal returns from afar",
  "structure holds briefly joyful",
  "forces clash without center",
  "recognition flickers then fades",
  "one holds against many",
  "vectors accelerate unstoppable",
  "bruised but still upright",
  "weight bends the carrier",
  "curiosity ignites",
  "impulse outruns measure",
  "heat steadies into presence",
  "vision burns into command",
  "overflow begins",
  "two vessels mirror each other",
  "voices braid together",
  "offered but not grasped",
  "loss darkens the vessel",
  "memory returns sweet",
  "images scatter none stable",
  "departure from what was held",
  "satisfaction pools here",
  "completion in shared flow",
  "an odd dream surfaces",
  "movement guided by feeling",
  "still waters conceal depth",
  "emotion governed not erased",
  "clarity cuts open space",
  "equilibrium holds with strain",
  "piercing through the heart",
  "rest to reset the edge",
  "victory isolates the hand",
  "passage across gray water",
  "taken in secrecy",
  "bound yet gaps remain",
  "anxieties echo in the night",
  "collapse nothing further",
  "curiosity sharpens",
  "action cuts ahead of thought",
  "truth spoken without shield",
  "authority through reason",
  "a seed takes form",
  "balance shifts endlessly",
  "structure built by many hands",
  "grasp tightens into cage",
  "exclusion at the threshold",
  "exchange mediated by hand",
  "waiting for ripening",
  "repetition carves mastery",
  "solitude sustained by gain",
  "lineage anchors wealth",
  "curiosity rooted in soil",
  "movement slow but relentless",
  "matter nurtures quietly",
  "structure hardens into rule"
];

let pressTimer;
const phraseEl = document.getElementById('phrase');
const orb = document.getElementById('orb');
const sparkle = document.getElementById('sparkle');

function formatVertical(text) {
  return text.split(" ").join("\n");
}

window.addEventListener('keydown', e => {
  if (e.code === 'Space' && !pressTimer) {
    orb.classList.add('lit');

    // smoother overlap â€” aura fades in while orb is transitioning
    setTimeout(() => {
      orb.classList.add('aura');
    }, 600);

    // glow and phrase come later
    pressTimer = setTimeout(() => {
      orb.classList.add('glow');
      const phrase = phrases[Math.floor(Math.random() * phrases.length)];
      phraseEl.textContent = formatVertical(phrase);
      phraseEl.classList.add('visible');
      sparkle.currentTime = 0;
      sparkle.play();
      setTimeout(() => phraseEl.classList.remove('visible'), 7000);
    }, 5000);
  }
});

window.addEventListener('keyup', e => {
  if (e.code === 'Space') {
    orb.classList.remove('lit', 'aura', 'glow');
    clearTimeout(pressTimer);
    pressTimer = null;
  }
});
</script>

</body>
</html>
